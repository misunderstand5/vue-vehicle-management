webpackJsonp([1],{"/w8P":function(e,t){},"0PIF":function(e,t){},"5fK8":function(e,t){},"7xIN":function(e,t){},"8d3T":function(e,t,i){e.exports=i.p+"static/img/car.55167d5.jpg"},Dmuv:function(e,t){},F46H:function(e,t){},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={};i.d(a,"timestampToTime",function(){return g}),i.d(a,"setStore",function(){return v}),i.d(a,"getStore",function(){return b}),i.d(a,"removeStore",function(){return y}),i.d(a,"setCookie",function(){return I}),i.d(a,"getCookie",function(){return _}),i.d(a,"delCookie",function(){return w});var n=i("fZjL"),r=i.n(n),o=i("7+uW"),l=i("zL8q"),s=i.n(l),c=(i("tvR6"),{render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]});var d=i("VU/8")({name:"App"},c,!1,function(e){i("OGNB")},null,null).exports,m=i("/ocq"),u=i("mvHQ"),p=i.n(u),h=i("mtWM"),f=i.n(h),g=function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},v=function(e,t){e&&("string"!=typeof t&&(t=p()(t)),window.localStorage.setItem(e,t))},b=function(e){if(e)return window.localStorage.getItem(e)},y=function(e){e&&window.localStorage.removeItem(e)};function I(e,t,i){var a=new Date;a.setDate(a.getDate()+i),document.cookie=e+"="+t+";expires="+a}function _(e){var t=RegExp(e+"=([^;]+)"),i=document.cookie.match(t);return i?i[1]:""}function w(e){I(e,null,-1)}i("NC6I");var k={name:"SIdentify",props:{identifyCode:{type:String,default:"1234"},fontSizeMin:{type:Number,default:25},fontSizeMax:{type:Number,default:35},backgroundColorMin:{type:Number,default:200},backgroundColorMax:{type:Number,default:220},dotColorMin:{type:Number,default:60},dotColorMax:{type:Number,default:120},contentWidth:{type:Number,default:90},contentHeight:{type:Number,default:38}},methods:{randomNum:function(e,t){return Math.floor(Math.random()*(t-e)+e)},randomColor:function(e,t){return"rgb("+this.randomNum(e,t)+","+this.randomNum(e,t)+","+this.randomNum(e,t)+")"},drawPic:function(){var e=document.getElementById("s-canvas").getContext("2d");e.textBaseline="bottom",e.fillStyle="#e6ecfd",e.fillRect(0,0,this.contentWidth,this.contentHeight);for(var t=0;t<this.identifyCode.length;t++)this.drawText(e,this.identifyCode[t],t);this.drawLine(e),this.drawDot(e)},drawText:function(e,t,i){e.fillStyle=this.randomColor(50,160),e.font=this.randomNum(this.fontSizeMin,this.fontSizeMax)+"px SimHei";var a=(i+1)*(this.contentWidth/(this.identifyCode.length+1)),n=this.randomNum(this.fontSizeMax,this.contentHeight-5),r=this.randomNum(-30,30);e.translate(a,n),e.rotate(r*Math.PI/180),e.fillText(t,0,0),e.rotate(-r*Math.PI/180),e.translate(-a,-n)},drawLine:function(e){for(var t=0;t<4;t++)e.strokeStyle=this.randomColor(100,200),e.beginPath(),e.moveTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.lineTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.stroke()},drawDot:function(e){for(var t=0;t<30;t++)e.fillStyle=this.randomColor(0,255),e.beginPath(),e.arc(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight),1,0,2*Math.PI),e.fill()}},watch:{identifyCode:function(){this.drawPic()}},mounted:function(){this.drawPic()}},N={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"s-canvas"},[t("canvas",{attrs:{id:"s-canvas",width:this.contentWidth,height:this.contentHeight}})])},staticRenderFns:[]},F={name:"login",data:function(){return{logining:!1,rememberpwd:!1,identifyCodes:"1234567890abcdefjhijklinopqrsduvwxyz",identifyCode:"",ruleForm:{username:"",password:"",code:"",randomStr:"",codeimg:"",sidentify:""},rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]}}},components:{"v-sidentify":i("VU/8")(k,N,!1,null,null,null).exports},created:function(){this.$message({message:"账号密码及验证码不为空即可",type:"success"}),this.createCode(),this.getuserpwd()},mounted:function(){this.identifyCode="",this.makeCode(this.identifyCodes,4)},methods:{refreshCode:function(){this.identifyCode="",this.makeCode(this.identifyCodes,4)},makeCode:function(e,t){for(var i=0;i<t;i++)this.identifyCode+=this.identifyCodes[this.randomNum(0,this.identifyCodes.length)]},randomNum:function(e,t){return Math.floor(Math.random()*(t-e)+e)},getuserpwd:function(){""!=_("user")&&""!=_("pwd")&&(this.ruleForm.username=_("user"),this.ruleForm.password=_("pwd"),this.rememberpwd=!0)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.logining=!0,setTimeout(function(){t.logining=!1,t.$store.commit("login","true"),t.$router.push({path:"/goods/Goods"})},1e3)),login(t.ruleForm).then(function(e){if(!e.success)return t.$message.error(e.msg),t.logining=!1,!1;t.rememberpwd?(I("user",t.ruleForm.username,7),I("pwd",t.ruleForm.password,7)):(w("user"),w("pwd")),setTimeout(function(){t.logining=!1,localStorage.setItem("logintoken",e.data.token),localStorage.setItem("userdata",p()(e.data)),t.$store.commit("login","true"),t.$router.push({path:"/goods/Goods"})},1e3)})})}}},A={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"login-wrap"},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm login-container",attrs:{"label-position":"left",model:e.ruleForm,rules:e.rules,"label-width":"0px"}},[i("h3",{staticClass:"title"},[e._v("用户登录")]),e._v(" "),i("el-form-item",{attrs:{prop:"username"}},[i("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"password"}},[i("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{prop:"code"}},[i("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"图形验证码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("ruleForm")}},model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}})],1)],1),e._v(" "),i("el-col",{staticClass:"code-box",attrs:{span:12}},[i("div",{staticClass:"login-code",attrs:{width:"100%"},on:{click:e.refreshCode}},[i("v-sidentify")],1)])],1),e._v(" "),i("el-checkbox",{staticClass:"remember",model:{value:e.rememberpwd,callback:function(t){e.rememberpwd=t},expression:"rememberpwd"}},[e._v("记住密码")]),e._v(" "),i("el-form-item",{staticStyle:{width:"100%"}},[i("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.logining},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("登录\n      ")])],1)],1)],1)},staticRenderFns:[]};var x=i("VU/8")(F,A,!1,function(e){i("Dmuv")},"data-v-3304e574",null).exports,S=function(e,t,i){return f()({method:e,url:t,headers:{"Content-Type":"application/x-www-form-urlencoded",token:localStorage.getItem("logintoken")},data:i,traditional:!0,transformRequest:[function(e){var t="";for(var i in e)t+=encodeURIComponent(i)+"="+encodeURIComponent(e[i])+"&";return t}]}).then(function(e){return e.data})},T=function(e){return S("post","/api/Dept/save",e)},z=function(e){return f.a.get("/api/Dept/delete?ids="+e+"&token="+localStorage.getItem("logintoken")).then(function(e){return e.data})},C={name:"navcon",data:function(){return{collapsed:!0,imgshow:i("gQKk"),imgsq:i("rWRm"),user:{}}},created:function(){this.user=JSON.parse(localStorage.getItem("userdata"))},methods:{exit:function(){var e=this;this.$confirm("退出登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){setTimeout(function(){e.$store.commit("logout","false"),e.$router.push({path:"/login"}),e.$message({type:"success",message:"已退出登录!"})},1e3)}).catch(function(){e.$message({type:"info",message:"已取消"})})},toggle:function(e){this.collapsed=!e,this.$root.Bus.$emit("toggle",this.collapsed)}}},U={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"horizontal","background-color":"#334157","text-color":"#fff","active-text-color":"#fff"}},[i("el-button",{staticClass:"buttonimg"},[i("img",{staticClass:"showimg",attrs:{src:e.collapsed?e.imgsq:e.imgshow},on:{click:function(t){return e.toggle(e.collapsed)}}})]),e._v(" "),i("el-submenu",{staticClass:"submenu",attrs:{index:"2"}},[i("template",{slot:"title"},[e._v("超级管理员")]),e._v(" "),i("el-menu-item",{attrs:{index:"2-1"}},[e._v("设置")]),e._v(" "),i("el-menu-item",{attrs:{index:"2-2"},on:{click:function(t){return e.content()}}},[e._v("个人中心")]),e._v(" "),i("el-menu-item",{attrs:{index:"2-3"},on:{click:function(t){return e.exit()}}},[e._v("退出")])],2)],1)},staticRenderFns:[]};var $={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2",collapse:e.collapsed,"collapse-transition":"",router:"","default-active":e.$route.path,"unique-opened":"","background-color":"#334157","text-color":"#fff","active-text-color":"#ffd04b"}},[a("div",{staticClass:"logobox"},[a("img",{staticClass:"logoimg",attrs:{src:i("dLd/"),alt:""}})]),e._v(" "),e._l(e.allmenu,function(t){return a("el-submenu",{key:t.menuid,attrs:{index:t.menuname}},[a("template",{slot:"title"},[a("i",{staticClass:"iconfont",class:t.icon}),e._v(" "),a("span",[e._v(e._s(t.menuname))])]),e._v(" "),a("el-menu-item-group",e._l(t.menus,function(t){return a("el-menu-item",{key:t.menuid,attrs:{index:"/"+t.url}},[a("i",{staticClass:"iconfont",class:t.icon}),e._v(" "),a("span",[e._v(e._s(t.menuname))])])}),1)],2)})],2)},staticRenderFns:[]};var L={name:"index",data:function(){return{showclass:"asideshow",showtype:!1}},components:{navcon:i("VU/8")(C,U,!1,function(e){i("5fK8")},"data-v-6d73233c",null).exports,leftnav:i("VU/8")({name:"leftnav",data:function(){return{collapsed:!1,allmenu:[]}},created:function(){var e=this;this.allmenu=[{menuid:1,icon:"li-icon-xiangmuguanli",menuname:"基础管理",hasThird:null,url:null,menus:[{menuid:2,icon:"icon-cat-skuQuery",menuname:"商品管理",hasThird:"N",url:"goods/Goods",menus:null}]},{menuid:33,icon:"li-icon-dingdanguanli",menuname:"系统检测",hasThird:null,url:null,menus:[{menuid:34,icon:"icon-order-manage",menuname:"实时位置",hasThird:"N",url:"amap/AMap",menus:null},{menuid:36,icon:"icon-order-manage",menuname:"视频回放",hasThird:"N",url:"amap/Monitor",menus:null},{menuid:37,icon:"icon-order-manage",menuname:"行为检查",hasThird:"N",url:"amap/BehavioralSurveillance",menus:null}]},{menuid:71,icon:"li-icon-xitongguanli",menuname:"系统管理",hasThird:null,url:null,menus:[{menuid:72,icon:"icon-cus-manage",menuname:"用户管理",hasThird:"N",url:"system/user",menus:null},{menuid:174,icon:"icon-cms-manage",menuname:"车辆管理",hasThird:"N",url:"system/Module",menus:null},{menuid:73,icon:"icon-news-manage",menuname:"角色管理",hasThird:"N",url:"system/Role",menus:null},{menuid:74,icon:"icon-cs-manage",menuname:"公司管理",hasThird:"N",url:"system/Dept",menus:null},{menuid:75,icon:"icon-promotion-manage",menuname:"系统环境变量",hasThird:"N",url:"system/Variable",menus:null},{menuid:76,icon:"icon-cms-manage",menuname:"权限管理",hasThird:"N",url:"system/Permission",menus:null}]},{menuid:128,icon:"li-icon-shangchengxitongtubiaozitihuayuanwenjian91",menuname:"支付管理",hasThird:null,url:null,menus:[{menuid:129,icon:"icon-provider-manage",menuname:"支付配置信息",hasThird:"N",url:"machine/MachineConfig",menus:null},{menuid:175,icon:"icon-provider-manage",menuname:"支付配置",hasThird:"N",url:"pay/Config",menus:null}]},{menuid:150,icon:"li-icon-shangchengxitongtubiaozitihuayuanwenjian91",menuname:"图表",hasThird:null,url:null,menus:[{menuid:159,icon:"icon-provider-manage",menuname:"数据可视化",hasThird:"N",url:"charts/statistics",menus:null}]}],this.$root.Bus.$on("toggle",function(t){e.collapsed=!t})}},$,!1,function(e){i("Utyp")},null,null).exports},methods:{},created:function(){var e=this;this.$root.Bus.$on("toggle",function(t){t?e.showclass="asideshow":setTimeout(function(){e.showclass="aside"},300)})},beforeUpdate:function(){},beforeMount:function(){this.$message({message:"登录成功",type:"success"})}},P={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",{staticClass:"index-con"},[t("el-aside",{class:this.showclass},[t("leftnav")],1),this._v(" "),t("el-container",{staticClass:"main-con"},[t("el-header",{staticClass:"index-header"},[t("navcon")],1),this._v(" "),t("el-main",{attrs:{clss:"index-main"}},[t("router-view")],1)],1)],1)},staticRenderFns:[]};var E=i("VU/8")(L,P,!1,function(e){i("ox3T")},null,null).exports,V={render:function(){var e=this.$createElement;return(this._self._c||e)("el-pagination",{staticClass:"page-box",attrs:{background:"","current-page":this.childMsg.currentPage,"page-sizes":[10,20,30,40],"page-size":this.childMsg.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:this.childMsg.total},on:{"size-change":this.handleSizeChange,"current-change":this.handleCurrentChange}})},staticRenderFns:[]};var M=i("VU/8")({name:"Pagination",props:["childMsg"],data:function(){return{pageparm:{currentPage:this.childMsg.currentPage,pageSize:this.childMsg.pageSize}}},created:function(){},methods:{handleSizeChange:function(e){this.pageparm.pageSize=e,this.$emit("callFather",this.pageparm)},handleCurrentChange:function(e){this.pageparm.currentPage=e,this.$emit("callFather",this.pageparm)}}},V,!1,function(e){i("aCzF")},null,null).exports,D={data:function(){return{nshow:!0,fshow:!1,loading:!1,editFormVisible:!1,title:"添加",editForm:{deptId:"",deptName:"",deptNo:"",token:localStorage.getItem("logintoken")},rules:{deptName:[{required:!0,message:"请输入部门名称",trigger:"blur"}],deptNo:[{required:!0,message:"请输入部门代码",trigger:"blur"}]},formInline:{page:1,limit:10,varLable:"",varName:"",token:localStorage.getItem("logintoken")},seletedata:{ids:"",token:localStorage.getItem("logintoken")},userparm:[],listData:[],pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:M},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){this.loading=!0;var t=5,i=[{addUser:null,editUser:null,addTime:1521062371e3,editTime:15267002e5,deptId:2,deptName:"XX分公司",deptNo:"1",parentId:1},{addUser:null,editUser:null,addTime:1521063247e3,editTime:1526652291e3,deptId:3,deptName:"上海测试",deptNo:"02",parentId:1},{addUser:null,editUser:null,addTime:1526349555e3,editTime:1526349565e3,deptId:12,deptName:"1",deptNo:"11",parentId:1},{addUser:null,editUser:null,addTime:1526373178e3,editTime:1526373178e3,deptId:13,deptName:"5",deptNo:"5",parentId:1},{addUser:null,editUser:null,addTime:1526453107e3,editTime:1526453107e3,deptId:17,deptName:"v",deptNo:"v",parentId:1}];this.loading=!1,this.listData=i,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,this.pageparm.total=t},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.formInline)},handleEdit:function(e,t){this.editFormVisible=!0,void 0!=t&&"undefined"!=t?(this.title="修改",this.editForm.deptId=t.deptId,this.editForm.deptName=t.deptName,this.editForm.deptNo=t.deptNo):(this.title="添加",this.editForm.deptId="",this.editForm.deptName="",this.editForm.deptNo="")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;T(t.editForm).then(function(e){t.editFormVisible=!1,t.loading=!1,e.success?(t.getdata(t.formInline),t.$message({type:"success",message:"公司保存成功！"})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("公司保存失败，请稍后再试！")})})},deleteUser:function(e,t){var i=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){z(t.deptId).then(function(e){e.success?(i.$message({type:"success",message:"公司已删除!"}),i.getdata(i.formInline)):i.$message({type:"info",message:e.msg})}).catch(function(e){i.loading=!1,i.$message.error("公司删除失败，请稍后再试！")})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},closeDialog:function(){this.editFormVisible=!1}}},R={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),i("el-breadcrumb-item",[e._v("商品管理")])],1),e._v(" "),i("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[i("el-form-item",{attrs:{label:"搜索："}},[i("el-input",{attrs:{size:"small",placeholder:"输入部门名称"},model:{value:e.formInline.deptName,callback:function(t){e.$set(e.formInline,"deptName",t)},expression:"formInline.deptName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:""}},[i("el-input",{attrs:{size:"small",placeholder:"输入部门代码"},model:{value:e.formInline.deptNo,callback:function(t){e.$set(e.formInline,"deptNo",t)},expression:"formInline.deptNo"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEdit()}}},[e._v("添加")])],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[i("el-table-column",{attrs:{align:"center",type:"selection",width:"60"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"deptName",label:"部门名称",width:"300"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"deptNo",label:"部门代码",width:"300"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"editTime",label:"修改时间",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[e._v(e._s(e._f("timestampToTime")(t.row.editTime)))])]}}])}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"editUser",label:"修改人",width:"300"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteUser(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}}),e._v(" "),i("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"30%"},on:{"update:visible":function(t){e.editFormVisible=t},click:e.closeDialog}},[i("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[i("el-form-item",{attrs:{label:"部门名称",prop:"deptName"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入部门名称"},model:{value:e.editForm.deptName,callback:function(t){e.$set(e.editForm,"deptName",t)},expression:"editForm.deptName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"部门代码",prop:"deptNo"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入部门代码"},model:{value:e.editForm.deptNo,callback:function(t){e.$set(e.editForm,"deptNo",t)},expression:"editForm.deptNo"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var B=i("VU/8")(D,R,!1,function(e){i("wmXH")},"data-v-03dec142",null).exports,q={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("基础菜单 机器信息管理")])},staticRenderFns:[]};var K=i("VU/8")({},q,!1,function(e){i("dPK7")},null,null).exports,O={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("基础菜单 货道信息管理")])},staticRenderFns:[]};var H=i("VU/8")({},O,!1,function(e){i("qgky")},null,null).exports,G=i("ZNOL"),Y=i.n(G),W=i("/IwO"),j=i.n(W);window._AMapSecurityConfig={securityJsCode:"97cbc1db59da0e4687d4dbcf41484d78"};new W.AMapManager;var Q={name:"AMap",data:function(){return{searchValue:"",selectedLocation:null,autocomplete:null,placeSearch:null,formattedAddress:null,currentLocation:null,truck:Y.a,map:null,marker:null,markers:[],infoWindow:{isShow:!1,content:"",position:[]},geocoder:null,trackInfoList:[],timeout:null,loading:!1,licensePlate:"",accidentLicensePlate:"",carMarker:null,pathCoordinates:[],currentPathIndex:0,totalDistance:0,title:"车辆事故报警",alarmVisible:!0}},created:function(){var e=this;this.trackList(),setInterval(function(){e.dynamicTrackInfo()},1e4),setInterval(function(){e.trackList()},9e3)},mounted:function(){var e=this;this.initMap(),this.initplugins(),setTimeout(function(){e.dynamicTrackInfo()},1e3)},methods:{initMap:function(){var e=this,t=this;navigator.geolocation.getCurrentPosition(function(t){e.currentLocation=[t.coords.longitude,t.coords.latitude]}),this.map=new AMap.Map("container",{center:this.currentLocation,zoom:18}),AMap.plugin(["AMap.Scale","AMap.ToolBar","AMap.Geolocation","AMap.OverView","AMap.MapType","AMap.PlaceSearch"],function(){var i=new AMap.Scale,a=new AMap.ToolBar,n=new AMap.Geolocation({}),r=new AMap.OverView({isOpen:!0,visible:!0}),o=new AMap.MapType,l=new AMap.PlaceSearch({pageSize:5,pageIndex:1,city:"北京市",map:t.map});e.map.addControl(i),e.map.addControl(a),e.map.addControl(n),e.map.addControl(r),e.map.addControl(o),e.map.addControl(l)})},initplugins:function(){this.geocoder=new AMap.Geocoder({city:"全国"})},dynamicTrackInfo:function(){for(var e=this,t=0;t<this.markers.length;t++)this.markers[t].setMap(null);this.markers=[],console.log("刷新车辆在地图上面的位置");var a=this;this.trackInfoList.forEach(function(t){if(0!=t.longitude&&t.longitude){t.position=[t.longitude,t.latitude],2==t.status&&(e.accidentLicensePlate=t.license_plate,e.open4()),e.geocoder.getAddress(t.position,function(e,i){console.log("item.position:"+t.position),"complete"===e&&"OK"===i.info?(t.currentPosition=i.regeocode.formattedAddress,console.log("item.currentPosition:"+t.currentPosition)):console.log("报错："+i)}),e.marker=new AMap.Marker({map:e.map,position:[t.longitude,t.latitude],icon:i("ZNOL"),offset:new AMap.Pixel(-13,-30)}),e.markers.push(e.marker),a.marker.on("click",function(){var e=[];e.push("车牌号:"+t.license_plate),e.push("司机名:"+t.username),e.push("手机号:"+t.phone),0==t.status?e.push("状态:停止中"):1==t.status?e.push("状态:驾驶中"):e.push("<span class='error-text'>状态:故障中</span>"),e.push("地址:"+t.currentPosition),a.infoWindow=new AMap.InfoWindow({content:e.join("<br/>")}),a.infoWindow.open(a.map,t.position)});var n=[];n.push([126.656681,45.795415]),n.push(t.position)}})},querySearchAsync:function(e,t){var i=this.trackInfoList,a=e?i.filter(this.createStateFilter(e)):i;clearTimeout(this.timeout),this.timeout=setTimeout(function(){t(a)},3e3*Math.random())},createStateFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e){e.position&&(this.map.setCenter(e.position),this.map.setZoom(18))},searchAddress:function(){var e=this;this.trackInfoList.forEach(function(t){e.licensePlate==t.license_plate&&(e.map.setCenter(t.position),e.map.setZoom(18))})},trackList:function(){var e=this;console.log("后端数据刷新！！！");var t=this;f()({method:"post",url:"/Track/get_track_info_list"}).then(function(i){null!=i.data?t.trackInfoList=i.data:(console.log("提取失败！"),e.$message({type:"error",message:"提取失败！"}))})},parseAddress:function(e,t){var i=this,a=[e,t];this.geocoder.getAddress(a,function(e,t){"complete"===e&&"OK"===t.info?(i.formattedAddress=t.regeocode.formattedAddress,console.log("解析以后的地址this.formattedAddress："+i.formattedAddress)):console.log("报错："+t)})},searchInput:function(e,t){""!==e?AMap.plugin("AMap.Autocomplete",function(){new AMap.Autocomplete({city:"杭州市"}).search(e,function(e,i){if(i){var a=i.tips.map(function(e){return{value:e.name,location:e.location}});t(a)}})}):t([])},selectLocation:function(e){this.selectedLocation=e.location},goToSelectedLocation:function(){console.log("this.selectedLocation:"+this.selectedLocation),this.selectedLocation?(console.log("解析以后的地址："+this.searchValue),this.map.setZoom(18),this.map.panTo(this.selectedLocation),this.searchValue=this.parseAddress(longitude,latitude)):console.log("this.selectedLocation有错误")},open4:function(){this.$message({showClose:!0,message:"车牌号码为:"+this.accidentLicensePlate+"车辆发生车祸！！！",type:"error"})}}},X={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("div",{staticClass:"container"},[i("div",{staticClass:"search-box"},[i("el-autocomplete",{staticStyle:{width:"300px"},attrs:{clearable:"","auto-complete":"off","fetch-suggestions":e.querySearchAsync,placeholder:"请输入车牌号进行查询"},on:{select:e.handleSelect},model:{value:e.licensePlate,callback:function(t){e.licensePlate=t},expression:"licensePlate"}}),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-search",loading:e.loading},on:{click:e.searchAddress}},[e._v("搜索")]),e._v(" "),i("el-autocomplete",{staticStyle:{width:"300px"},attrs:{clearable:"","auto-complete":"off","fetch-suggestions":e.searchInput,placeholder:"请输入位置关键字"},on:{select:e.selectLocation},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.goToSelectedLocation}},[e._v("搜索")])],1),e._v(" "),i("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"container"}})])])},staticRenderFns:[]};var Z=i("VU/8")(Q,X,!1,function(e){i("OgzQ")},null,null).exports,J=i("NYxO"),ee={data:function(){return{currentPage:1,pageSize:10,loading:!1,currentIndex:-1,formInline:{deptName:"",phone:"",license_plate:""},videoInfoList:[],currentVideoInfoList:[],deptNameInfoList:[],videoUrl:"http://101.34.13.144:8080/examples/2023-11-08 20-04-27_18345264895.mov"}},components:{Pagination:M},watch:{},created:function(){this.videoList(),this.deptNameList()},computed:{index:function(){return J.a},visibleVideoInfoList:function(){var e=this,t=this.videoInfoList;this.formInline.deptName&&(t=t.filter(function(t){return t.deptName===e.formInline.deptName})),this.formInline.phone&&(t=t.filter(function(t){return t.phone===e.formInline.phone})),this.formInline.license_plate&&(t=t.filter(function(t){return t.license_plate===e.formInline.license_plate})),this.currentVideoInfoList=t;var i=(this.currentPage-1)*this.pageSize,a=this.currentPage*this.pageSize;return t.slice(i,a)}},methods:{handleSizeChange:function(e){this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e},startPlay:function(e,t){this.currentIndex=e,this.videoUrl=t.videoUrl,console.log("this.videoUrl:"+this.videoUrl)},download:function(e,t){window.location.href=t.videoUrl},deptNameList:function(){var e=this;this.videoInfoList.forEach(function(t){e.deptNameInfoList.includes(t.deptName)||e.deptNameInfoList.push(t.deptName)}),console.log("this.deptNameInfoList.length"+this.deptNameInfoList.length+"this.deptNameInfoList"+this.deptNameInfoList[0])},videoList:function(){var e=this;console.log("videoList()后端数据刷新！！！"),this.loading=!0;var t=this;f()({method:"post",url:"/Track/get_video_info_list"}).then(function(i){null!=i.data?(t.videoInfoList=i.data,console.log("response.data:"+i.data),console.log("response.data.length():"+i.data.length),t.deptNameList()):(console.log("提取失败！"),e.$message({type:"error",message:"提取失败！"}))}),this.loading=!1},selectChange:function(e){this.selectdata=e},search:function(){console.log("formInline:"+this.formInline.deptName+":"+this.formInline.phone+":"+this.formInline.license_plate)}}},te={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),i("el-breadcrumb-item",[e._v("视频回放")])],1),e._v(" "),i("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[i("el-form-item",{attrs:{label:"搜索："}},[i("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.formInline.deptName,callback:function(t){e.$set(e.formInline,"deptName",t)},expression:"formInline.deptName"}},[i("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.deptNameInfoList,function(t,a){return i("el-option",{key:a,attrs:{value:t}},[e._v(e._s(t))])})],2)],1),e._v(" "),i("el-form-item",{attrs:{label:""}},[i("el-input",{attrs:{size:"small",placeholder:"输入手机号"},model:{value:e.formInline.phone,callback:function(t){e.$set(e.formInline,"phone",t)},expression:"formInline.phone"}})],1),e._v(" "),i("el-form-item",{attrs:{label:""}},[i("el-input",{attrs:{size:"small",placeholder:"输入车牌号"},model:{value:e.formInline.license_plate,callback:function(t){e.$set(e.formInline,"license_plate",t)},expression:"formInline.license_plate"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)],1),e._v(" "),i("video",{staticStyle:{width:"950px"},attrs:{controls:"",src:e.videoUrl}}),e._v(" "),i("p",[i("el-tag",[e._v("事故视频详细列表")])],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.visibleVideoInfoList,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"},on:{"selection-change":e.selectChange}},[i("el-table-column",{attrs:{align:"center",type:"selection",width:"50"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"videoName",label:"视频名","min-width":"100"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"deptName",label:"公司",width:"80"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"username",label:"用户名",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"phone",label:"手机号",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"license_plate",label:"车牌号",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"starttime",label:"录制时间","min-width":"100"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"duration",label:"时长","min-width":"80"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"accidentAddress",label:"事故地点","min-width":"100"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"type",label:"类型","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?i("el-tag",{attrs:{type:"danger"}},[e._v("交通事故")]):e._e(),e._v(" "),2==t.row.type?i("el-tag",[e._v("其他")]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.$index==e.currentIndex?i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.startPlay(t.$index,t.row)}}},[e._v("正在播放")]):i("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(i){return e.startPlay(t.$index,t.row)}}},[e._v("播放")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(i){return e.download(t.$index,t.row)}}},[e._v("下载")])]}}])})],1),e._v(" "),i("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.currentVideoInfoList.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var ie=i("VU/8")(ee,te,!1,function(e){i("kLiI")},"data-v-39ad6540",null).exports,ae=i("8d3T"),ne=i.n(ae),re={data:function(){return{currentPage:1,pageSize:10,loading:!1,formInline:{deptName:"",phone:"",license_plate:""},currentIndex:-1,base64Image:ne.a,IPaddress:"",WebSocketIP:"",socket:"",trackInfoList:[],currentTrackInfoList:[],deptNameInfoList:[]}},components:{Pagination:M},watch:{},created:function(){this.trackList(),this.getdata(this.formInline)},computed:{index:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return index}),visibleTruckInfoList:function(){var e=this,t=this.trackInfoList;this.formInline.deptName&&(t=t.filter(function(t){return t.deptName===e.formInline.deptName})),this.formInline.phone&&(t=t.filter(function(t){return t.phone===e.formInline.phone})),this.formInline.license_plate&&(t=t.filter(function(t){return t.license_plate===e.formInline.license_plate})),this.currentTrackInfoList=t;var i=(this.currentPage-1)*this.pageSize,a=this.currentPage*this.pageSize;return t.slice(i,a)}},methods:{handleSizeChange:function(e){this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e},deptNameList:function(){var e=this;this.trackInfoList.forEach(function(t){e.deptNameInfoList.includes(t.deptName)||e.deptNameInfoList.push(t.deptName)}),console.log("this.deptNameInfoList.length"+this.deptNameInfoList.length+"this.deptNameInfoList"+this.deptNameInfoList[0])},stop:function(){this.socket.readyState===WebSocket.OPEN&&this.socket.close(),this.currentIndex=-1},detection:function(e,t){var i=this;console.log("row.status:"+t.status),"0"!=t.status?(this.currentIndex=e,this.IPaddress=t.ipaddress,console.log("this.IPaddress:"+this.IPaddress),this.WebSocketIP="ws://"+this.IPaddress+":6010/websocket",console.log("this.WebSocketIP:"+this.WebSocketIP),this.socket.readyState===WebSocket.OPEN&&this.socket.close(),this.socket=new WebSocket(this.WebSocketIP),this.socket.onopen=function(){this.socket.send("发送数据"),alert("数据发送中...")},this.socket.onmessage=function(e){console.log("event.data:"+e.data),console.log("event.data:"+e.data.toString()),console.log("this.videoContent:");var t=e.data;i.base64Image="data:image/jpg;base64,"+t}):this.$message.error("车辆在停止中无法查看!!")},search:function(){},getStatusText:function(e){return 0==e?"停止中":1==e?"驾驶中":"异常中"},getStatusType:function(e){return 0==e?"info":1==e?"success":"danger"},trackList:function(){var e=this;console.log("后端数据刷新！！！"),this.loading=!0;var t=this;f()({method:"post",url:"/Track/get_track_info_list"}).then(function(i){null!=i.data?(t.trackInfoList=i.data,t.deptNameList()):(console.log("提取失败！"),e.$message({type:"error",message:"提取失败！"}))}),this.loading=!1},selectChange:function(e){this.selectdata=e}},mounted:function(){}},oe={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),i("el-breadcrumb-item",[e._v("行为检测")])],1),e._v(" "),i("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[i("el-form-item",{attrs:{label:"搜索："}},[i("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.formInline.deptName,callback:function(t){e.$set(e.formInline,"deptName",t)},expression:"formInline.deptName"}},[i("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.deptNameInfoList,function(t,a){return i("el-option",{key:a,attrs:{value:t}},[e._v(e._s(t))])})],2)],1),e._v(" "),i("el-form-item",{attrs:{label:""}},[i("el-input",{attrs:{size:"small",placeholder:"输入手机号"},model:{value:e.formInline.phone,callback:function(t){e.$set(e.formInline,"phone",t)},expression:"formInline.phone"}})],1),e._v(" "),i("el-form-item",{attrs:{label:""}},[i("el-input",{attrs:{size:"small",placeholder:"输入车牌号"},model:{value:e.formInline.license_plate,callback:function(t){e.$set(e.formInline,"license_plate",t)},expression:"formInline.license_plate"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)],1),e._v(" "),i("img",{attrs:{src:e.base64Image,height:"600px",width:"1067dp"}}),e._v(" "),i("p",[i("el-tag",[e._v("司机信息详细列表")])],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.visibleTruckInfoList,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"},on:{"selection-change":e.selectChange}},[i("el-table-column",{attrs:{align:"center",type:"selection",width:"50"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"deptName",label:"公司",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"username",label:"用户名",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"phone",label:"手机号",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"license_plate",label:"车牌号",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"sex",label:"性别","min-width":"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"status:",label:"状态","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{attrs:{type:e.getStatusType(t.row.status)}},[e._v("\n            "+e._s(e.getStatusText(t.row.status))+"\n          ")])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.$index==e.currentIndex?i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.stop(t.$index,t.row)}}},[e._v("暂停")]):i("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(i){return e.detection(t.$index,t.row)}}},[e._v("查看")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteUser(t.$index,t.row)}}},[e._v("联系")])]}}])})],1),e._v(" "),i("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.currentTrackInfoList.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var le=i("VU/8")(re,oe,!1,function(e){i("ep8S")},"data-v-547521a3",null).exports,se={data:function(){return{currentPage:1,pageSize:10,currentIndex:-1,formInline:{deptName:"",phone:"",license_plate:""},userInfoList:[],currentUserInfoList:[],deptNameInfoList:[],nshow:!0,fshow:!1,loading:!1,title:"添加用户",editFormVisible:!1,dataAccessshow:!1,unitAccessshow:!1,editForm:{userId:"",userName:"",userRealName:"",roleId:"",userMobile:"",userEmail:"",userSex:"",token:localStorage.getItem("logintoken")},unitparm:{userIds:"",deptId:"",deptName:""},rules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],userRealName:[{required:!0,message:"请输入姓名",trigger:"blur"}],roleId:[{required:!0,message:"请选择角色",trigger:"blur"}],userMobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1(3\d|47|5((?!4)\d)|7(0|1|[6-8])|8\d)\d{8,8}$/,required:!0,message:"请输入正确的手机号",trigger:"blur"}],userEmail:[{required:!0,message:"请输入邮箱",trigger:"blur"},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,required:!0,message:"请输入正确的邮箱",trigger:"blur"}],userSex:[{required:!0,message:"请选择性别",trigger:"blur"}]},seletedata:{ids:"",token:localStorage.getItem("logintoken")},resetpsd:{userId:"",token:localStorage.getItem("logintoken")},offline:{token:localStorage.getItem("logintoken")},UserDept:[],defaultProps:{children:"children",label:"name"},checkmenu:[],saveroleId:""}},components:{Pagination:M},watch:{},created:function(){this.getUserList(),this.deptNameList()},computed:{index:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return index}),visibleUserInfoList:function(){var e=this,t=this.userInfoList;this.formInline.deptName&&(t=t.filter(function(t){return t.deptName===e.formInline.deptName})),this.formInline.phone&&(t=t.filter(function(t){return t.phone===e.formInline.phone})),this.formInline.license_plate&&(t=t.filter(function(t){return t.license_plate===e.formInline.license_plate})),this.currentUserInfoList=t;var i=(this.currentPage-1)*this.pageSize,a=this.currentPage*this.pageSize;return t.slice(i,a)}},methods:{handleSizeChange:function(e){this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e},getUserList:function(){var e=this;console.log("UserList后端数据刷新！！！");var t=this;f()({method:"post",url:"/User/get_user_info_list"}).then(function(i){null!=i.data?(t.userInfoList=i.data,t.deptNameList(),console.log("提取成功：response.data")):(console.log("提取失败！"),e.$message({type:"error",message:"提取失败！"}))})},deptNameList:function(){var e=this;this.userInfoList.forEach(function(t){e.deptNameInfoList.includes(t.deptName)||e.deptNameInfoList.push(t.deptName)})},editType:function(e,t){var i=this;this.loading=!0;var a={lock:"",userId:"",token:localStorage.getItem("logintoken")};a.userId=t.userId;var n,r=t.isLock;a.lock="N"==r?"Y":"N",(n=a,f.a.get("/api/User/lock?userId="+n.userId+"&lock="+n.lock+"&token="+localStorage.getItem("logintoken"))).then(function(e){i.loading=!1,0==e.success?i.$message({type:"info",message:e.msg}):(i.$message({type:"success",message:"状态修改成功"}),i.getdata(i.formInline))})},handleEdit:function(e,t){this.editFormVisible=!0,void 0!=t&&"undefined"!=t?(this.title="修改用户",this.editForm.userId=t.userId,this.editForm.userName=t.userName,this.editForm.userRealName=t.userRealName,this.editForm.roleId=t.roleId,this.editForm.userMobile=t.userMobile,this.editForm.userEmail=t.userEmail,this.editForm.userSex=t.userSex):(this.title="添加用户",this.editForm.userId="",this.editForm.userName="",this.editForm.userRealName="",this.editForm.roleId="",this.editForm.userMobile="",this.editForm.userEmail="",this.editForm.userSex="")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var i;(i=t.editForm,S("post","/api/User/save",i)).then(function(e){t.editFormVisible=!1,t.loading=!1,e.success?(t.getdata(t.formInline),t.$message({type:"success",message:"数据保存成功！"})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("保存失败，请稍后再试！")})})},handleunit:function(e,t){var i=this;this.unitAccessshow=!0;var a;(a=0,f.a.get("/api/UserDept/deptTree/"+a+"?token="+localStorage.getItem("logintoken"))).then(function(e){e.data.success?i.UserDept=i.changeArr(e.data.data):i.$message({type:"info",message:e.msg})}).catch(function(e){i.loading=!1,i.$message.error("配置权限失败,请稍后再试！")})},handleClick:function(e,t,i){t&&(this.$refs.tree.setCheckedNodes([]),this.$refs.tree.setCheckedNodes([e]),this.unitparm.deptId=e.id,this.unitparm.deptName=e.name)},unitPermSave:function(){var e,t=this,i=this.selectdata,a=[];if(0!=i)for(var n=0;n<i.length;n++)a.push(i[n].userId);this.unitparm.userIds=a.join(","),(e=this.unitparm,S("post","/api/User/change/dept",e)).then(function(e){t.unitAccessshow=!1,e.success?(t.$message({type:"success",message:"部门设置成功！"}),t.getdata(t.formInline)):t.$message({type:"info",message:e.msg})}).catch(function(e){t.loading=!1,t.$message.error("部门设置失败,请稍后再试！")})},selectChange:function(e){this.selectdata=e},closeDialog:function(e){"edit"==e?this.editFormVisible=!1:"perm"==e?this.dataAccessshow=!1:"unit"==e&&(this.unitAccessshow=!1)},deleteUser:function(e,t){var i=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=t.id,f.a.delete("/api/User/delete?ids="+e+"&token="+localStorage.getItem("logintoken")).then(function(e){return e.data})).then(function(e){e.success?(i.$message({type:"success",message:"数据已删除!"}),i.getdata(i.formInline)):i.$message({type:"info",message:e.msg})}).catch(function(e){i.loading=!1,i.$message.error("数据删除失败，请稍后再试！")})}).catch(function(){i.$message({type:"info",message:"已取消删除！"})})},resetpwd:function(e,t){var i=this;this.resetpsd.userId=t.userId,this.$confirm("确定要重置密码吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=i.resetpsd,S("post","/api/User/pwd",e)).then(function(e){e.success?(i.$message({type:"success",message:"重置密码成功！"}),i.getdata(i.formInline)):i.$message({type:"info",message:e.msg})}).catch(function(e){i.loading=!1,i.$message.error("重置密码失败，请稍后再试！")})}).catch(function(){i.$message({type:"info",message:"取消重置密码！"})})},dataAccess:function(e,t){var i,a=this;this.dataAccessshow=!0,this.saveroleId=t.userId,(i=t.userId,f.a.get("/api/UserDept/tree/"+i+"?token="+localStorage.getItem("logintoken"))).then(function(e){e.data.success?(a.checkmenu=a.changemenu(e.data.data),a.UserDept=a.changeArr(e.data.data)):a.$message({type:"info",message:e.data.msg})}).catch(function(e){a.loading=!1,a.$message.error("获取权限失败，请稍后再试！")})},changeArr:function(e){for(var t={},i=[],a=0;0!=e.length;){if(0==e[a].pId)i.push({id:e[a].id,name:e[a].name,pId:e[a].pId,open:e[a].open,checked:e[a].checked,children:[]}),t[e[a].id]=[i.length-1],e.splice(a,1),a--;else{var n=t[e[a].pId];if(void 0!=n){for(var r=i[n[0]],o=1;o<n.length;o++)r=r.children[n[o]];r.children.push({id:e[a].id,name:e[a].name,pId:e[a].pId,open:e[a].open,checked:e[a].checked,children:[]}),t[e[a].id]=n.concat([r.children.length-1]),e.splice(a,1),a--}}++a>e.length-1&&(a=0)}return i},changemenu:function(e){for(var t=[],i=0;i<e.length;i++)e[i].checked&&t.push(e[i].id);return t},menuPermSave:function(){var e,t=this,i={userId:this.saveroleId,deptIds:""},a=this.$refs.tree.getCheckedNodes(),n=[];if(0!=a.length){for(var r=0;r<a.length;r++)n.push(a[r].id);i.deptIds=p()(n)}(e=i,S("post","/api/UserDept/save",e)).then(function(e){e.success?(t.$message({type:"success",message:"权限保存成功"}),t.dataAccessshow=!1,t.getdata(t.formInline)):t.$message({type:"info",message:e.msg})}).catch(function(e){t.loading=!1,t.$message.error("权限保存失败，请稍后再试！")})},offlineUser:function(e,t){var i=this;this.$confirm("确定要让"+t.userName+"用户下线吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=t.userName,S("get","/api/User/expireToken/"+e,{})).then(function(e){e.success?(i.$message({type:"success",message:"用户"+t.userName+"强制下线成功！"}),i.getdata(i.formInline)):i.$message({type:"info",message:e.msg})}).catch(function(e){i.loading=!1,i.$message.error("用户下线失败，请稍后再试！")})}).catch(function(){i.$message({type:"info",message:"已取消"})})},refreshCache:function(e,t){var i,a=this;(i=t.userName,S("get","/api/User/flashCache/"+i,{})).then(function(e){e.success?(a.$message({type:"success",message:"刷新成功！"}),a.getdata(a.formInline)):a.$message({type:"info",message:e.msg})}).catch(function(e){a.loading=!1,a.$message.error("刷新失败，请稍后再试！")})}}},ce={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),i("el-breadcrumb-item",[e._v("用户管理")])],1),e._v(" "),i("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[i("el-form-item",{attrs:{label:"搜索："}},[i("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.formInline.deptName,callback:function(t){e.$set(e.formInline,"deptName",t)},expression:"formInline.deptName"}},[i("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.deptNameInfoList,function(t,a){return i("el-option",{key:a,attrs:{value:t}},[e._v(e._s(t))])})],2)],1),e._v(" "),i("el-form-item",{attrs:{label:""}},[i("el-input",{attrs:{size:"small",placeholder:"输入手机号"},model:{value:e.formInline.phone,callback:function(t){e.$set(e.formInline,"phone",t)},expression:"formInline.phone"}})],1),e._v(" "),i("el-form-item",{attrs:{label:""}},[i("el-input",{attrs:{size:"small",placeholder:"输入车牌号"},model:{value:e.formInline.license_plate,callback:function(t){e.$set(e.formInline,"license_plate",t)},expression:"formInline.license_plate"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEdit()}}},[e._v("添加")]),e._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.handleunit()}}},[e._v("部门设置")])],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.visibleUserInfoList,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"},on:{"selection-change":e.selectChange}},[i("el-table-column",{attrs:{align:"center",type:"selection",width:"50"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"deptName",label:"公司",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"username",label:"用户名",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"phone",label:"手机号",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"sex",label:"性别","min-width":"50"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"accidentAddress",label:"邮件","min-width":"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"last_login",label:"上次登录时间","min-width":"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"role_name",label:"用户类型","min-width":"120"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteUser(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(i){return e.resetpwd(t.$index,t.row)}}},[e._v("重置密码")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(i){return e.dataAccess(t.$index,t.row)}}},[e._v("数据权限")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(i){return e.offlineUser(t.$index,t.row)}}},[e._v("下线")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(i){return e.refreshCache(t.$index,t.row)}}},[e._v("刷新缓存")])]}}])})],1),e._v(" "),i("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.currentUserInfoList.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),i("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"30%"},on:{"update:visible":function(t){e.editFormVisible=t},click:function(t){return e.closeDialog("edit")}}},[i("el-form",{ref:"editForm",attrs:{"label-width":"80px",model:e.editForm,rules:e.rules}},[i("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入用户名"},model:{value:e.editForm.userName,callback:function(t){e.$set(e.editForm,"userName",t)},expression:"editForm.userName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"姓名",prop:"userRealName"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入姓名"},model:{value:e.editForm.userRealName,callback:function(t){e.$set(e.editForm,"userRealName",t)},expression:"editForm.userRealName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"角色",prop:"roleId"}},[i("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择"},model:{value:e.editForm.roleId,callback:function(t){e.$set(e.editForm,"roleId",t)},expression:"editForm.roleId"}},[i("el-option",{attrs:{label:"公司管理员",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"普通用户",value:"2"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"手机号",prop:"userMobile"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入手机号"},model:{value:e.editForm.userMobile,callback:function(t){e.$set(e.editForm,"userMobile",t)},expression:"editForm.userMobile"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"邮件",prop:"userEmail"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入邮箱地址"},model:{value:e.editForm.userEmail,callback:function(t){e.$set(e.editForm,"userEmail",t)},expression:"editForm.userEmail"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"性别",prop:"userSex"}},[i("el-radio",{attrs:{label:"男"},model:{value:e.editForm.userSex,callback:function(t){e.$set(e.editForm,"userSex",t)},expression:"editForm.userSex"}},[e._v("男")]),e._v(" "),i("el-radio",{attrs:{label:"女"},model:{value:e.editForm.userSex,callback:function(t){e.$set(e.editForm,"userSex",t)},expression:"editForm.userSex"}},[e._v("女")])],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){return e.closeDialog("edit")}}},[e._v("取消")]),e._v(" "),i("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("保存")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"数据权限",visible:e.dataAccessshow,width:"30%"},on:{"update:visible":function(t){e.dataAccessshow=t},click:function(t){return e.closeDialog("perm")}}},[i("el-tree",{ref:"tree",attrs:{"default-expand-all":"",data:e.UserDept,props:e.defaultProps,"default-checked-keys":e.checkmenu,"node-key":"id","show-checkbox":""}}),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){return e.closeDialog("perm")}}},[e._v("取消")]),e._v(" "),i("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:e.menuPermSave}},[e._v("保存")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"所属单位",visible:e.unitAccessshow,width:"30%"},on:{"update:visible":function(t){e.unitAccessshow=t},click:function(t){return e.closeDialog("unit")}}},[i("el-tree",{ref:"tree",attrs:{"default-expand-all":"",data:e.UserDept,props:e.defaultProps,"default-checked-keys":e.checkmenu,"node-key":"id","show-checkbox":"","check-strictly":""},on:{"check-change":e.handleClick}}),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){return e.closeDialog("unit")}}},[e._v("取消")]),e._v(" "),i("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:e.unitPermSave}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var de=i("VU/8")(se,ce,!1,function(e){i("ymzD")},"data-v-b9d34426",null).exports,me={data:function(){return{currentPage:1,pageSize:10,loading:!1,formInline:{deptName:"",phone:"",license_plate:""},trackInfoList:[],currentTrackInfoList:[],deptNameInfoList:[]}},components:{Pagination:M},watch:{},created:function(){this.trackList()},computed:{index:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return index}),visibleTruckInfoList:function(){var e=this,t=this.trackInfoList;this.formInline.deptName&&(t=t.filter(function(t){return t.deptName===e.formInline.deptName})),this.formInline.phone&&(t=t.filter(function(t){return t.phone===e.formInline.phone})),this.formInline.license_plate&&(t=t.filter(function(t){return t.license_plate===e.formInline.license_plate})),this.currentTrackInfoList=t;var i=(this.currentPage-1)*this.pageSize,a=this.currentPage*this.pageSize;return t.slice(i,a)}},methods:{handleSizeChange:function(e){this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e},deptNameList:function(){var e=this;this.trackInfoList.forEach(function(t){e.deptNameInfoList.includes(t.deptName)||e.deptNameInfoList.push(t.deptName)}),console.log("this.deptNameInfoList.length"+this.deptNameInfoList.length+"this.deptNameInfoList"+this.deptNameInfoList[0])},search:function(){this.getdata(this.formInline)},getStatusText:function(e){return 0==e?"停止中":1==e?"驾驶中":"异常中"},getStatusType:function(e){return 0==e?"info":1==e?"success":"danger"},trackList:function(){var e=this;console.log("后端数据刷新！！！"),this.loading=!0;var t=this;f()({method:"post",url:"/Track/get_track_info_list"}).then(function(i){null!=i.data?(t.trackInfoList=i.data,t.deptNameList()):(console.log("提取失败！"),e.$message({type:"error",message:"提取失败！"}))}),this.loading=!1},selectChange:function(e){this.selectdata=e}}},ue={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),i("el-breadcrumb-item",[e._v("车辆管理")])],1),e._v(" "),i("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[i("el-form-item",{attrs:{label:"搜索："}},[i("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.formInline.deptName,callback:function(t){e.$set(e.formInline,"deptName",t)},expression:"formInline.deptName"}},[i("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.deptNameInfoList,function(t,a){return i("el-option",{key:a,attrs:{value:t}},[e._v(e._s(t))])})],2)],1),e._v(" "),i("el-form-item",{attrs:{label:""}},[i("el-input",{attrs:{size:"small",placeholder:"输入手机号"},model:{value:e.formInline.phone,callback:function(t){e.$set(e.formInline,"phone",t)},expression:"formInline.phone"}})],1),e._v(" "),i("el-form-item",{attrs:{label:""}},[i("el-input",{attrs:{size:"small",placeholder:"输入车牌号"},model:{value:e.formInline.license_plate,callback:function(t){e.$set(e.formInline,"license_plate",t)},expression:"formInline.license_plate"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEdit()}}},[e._v("添加")]),e._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.handleunit()}}},[e._v("部门设置")])],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.visibleTruckInfoList,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"},on:{"selection-change":e.selectChange}},[i("el-table-column",{attrs:{align:"center",type:"selection",width:"50"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"deptName",label:"公司",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"username",label:"用户名",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"phone",label:"手机号",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"license_plate",label:"车牌号",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"sex",label:"性别","min-width":"50"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"status:",label:"状态","min-width":"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{attrs:{type:e.getStatusType(t.row.status)}},[e._v("\n            "+e._s(e.getStatusText(t.row.status))+"\n          ")])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"editTime",label:"修改时间","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[e._v(e._s(e._f("timestampToTime")(t.row.editTime)))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteUser(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(i){return e.resetpwd(t.$index,t.row)}}},[e._v("重置")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(i){return e.offlineUser(t.$index,t.row)}}},[e._v("下线")])]}}])})],1),e._v(" "),i("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.currentTrackInfoList.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var pe=i("VU/8")(me,ue,!1,function(e){i("wmmM")},"data-v-14a61a1a",null).exports,he={data:function(){return{currentPage:1,pageSize:10,formInline:{role_name:"",role_id:""},roleInfoList:[],currentRoleInfoList:[],nshow:!0,fshow:!1,loading:!1,editFormVisible:!1,menuAccessshow:!1,title:"添加",editForm:{roleId:"",systemNo:"",roleNo:"",roleName:"",token:localStorage.getItem("logintoken")},rules:{systemNo:[{required:!0,message:"请输入系统编码",trigger:"blur"}],roleNo:[{required:!0,message:"请输入角色代码",trigger:"blur"}],roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}]},seletedata:{ids:"",token:localStorage.getItem("logintoken")},userparm:[],listData:[],RoleRight:[],RoleRightProps:{children:"children",label:"name"},checkmenu:[],saveroleId:""}},components:{Pagination:M},watch:{},created:function(){this.roleList()},computed:{index:function(){return J.a},visibleRoleInfoList:function(){var e=this,t=this.roleInfoList;this.formInline.role_id&&(t=t.filter(function(t){return t.role_id===e.formInline.role_id})),this.formInline.role_name&&(t=t.filter(function(t){return t.role_name===e.formInline.role_name})),this.currentRoleInfoList=t;var i=(this.currentPage-1)*this.pageSize,a=this.currentPage*this.pageSize;return t.slice(i,a)}},methods:{handleSizeChange:function(e){this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e},roleList:function(){var e=this;console.log("后端数据刷新！！！"),this.loading=!0;var t=this;f()({method:"post",url:"/User/get_role_info_list"}).then(function(i){null!=i.data?t.roleInfoList=i.data:(console.log("提取失败！"),e.$message({type:"error",message:"提取失败！"}))}),this.loading=!1},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.formInline)},handleEdit:function(e,t){this.editFormVisible=!0,void 0!=t&&"undefined"!=t?(this.title="修改",this.editForm.roleId=t.roleId,this.editForm.systemNo=t.systemNo,this.editForm.roleNo=t.roleNo,this.editForm.roleName=t.roleName):(this.title="添加",this.editForm.roleId="",this.editForm.systemNo="",this.editForm.roleNo="",this.editForm.roleName="")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var i;(i=t.editForm,S("post","/api/Role/save",i)).then(function(e){t.editFormVisible=!1,t.loading=!1,e.success?(t.getdata(t.formInline),t.$message({type:"success",message:"角色保存成功！"})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("角色保存失败，请稍后再试！")})})},deleteUser:function(e,t){var i=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=t.roleId,f.a.delete("/api/Role/delete?ids="+e+"&token="+localStorage.getItem("logintoken")).then(function(e){return e.data})).then(function(e){e.success?(i.$message({type:"success",message:"角色已删除！"}),i.getdata(i.formInline)):i.$message({type:"info",message:e.msg})}).catch(function(e){i.loading=!1,i.$message.error("角色删除失败，请稍后再试！")})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},menuAccess:function(e,t){var i,a=this;this.menuAccessshow=!0,this.saveroleId=t.roleId,(i=t.roleId,f.a.get("/api/RoleRight/tree/"+i+"?token="+localStorage.getItem("logintoken"))).then(function(e){e.data.success?(a.$message({type:"success",message:"获取权限成功"}),a.changemenu(e.data.data),a.RoleRight=a.changeArr(e.data.data)):a.$message({type:"info",message:e.data.msg})}).catch(function(e){a.loading=!1,a.$message.error("获取权限失败，请稍后再试！")})},changemenu:function(e){for(var t=[],i=0;i<e.length;i++)e[i].checked&&t.push(e[i].id);this.checkmenu=t},changeArr:function(e){var t=[],i=[],a=[];for(var n in e){if(!t[e[n].id]){var r={id:e[n].id,pId:e[n].pId,name:e[n].name,open:e[n].open,checked:e[n].checked,children:[]};t[e[n].id]=r,a.push(r)}e[n].uid>0&&t[e[n].id].children.push({id:e[n].id,pId:e[n].pId,name:e[n].name,open:e[n].open,checked:e[n].checked,children:[]})}for(var o in a)t[a[o].pId]?t[a[o].pId].children.push(t[a[o].id]):i.push(t[a[o].id]);return t=null,a=null,i},menuPermSave:function(){var e,t=this,i={roleId:this.saveroleId,moduleIds:""},a=this.$refs.tree.getCheckedNodes(),n=[];if(0!=a.length){for(var r=0;r<a.length;r++)n.push(a[r].id);i.moduleIds=p()(n)}(e=i,S("post","/api/RoleRight/save",e)).then(function(e){e.success?(t.$message({type:"success",message:"权限保存成功"}),t.menuAccessshow=!1,t.getdata(t.formInline)):t.$message({type:"info",message:e.msg})}).catch(function(e){t.loading=!1,t.$message.error("权限保存失败，请稍后再试！")})},closeDialog:function(e){"edit"==e?this.editFormVisible=!1:"perm"==e&&(this.menuAccessshow=!1)}}},fe={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),i("el-breadcrumb-item",[e._v("角色管理")])],1),e._v(" "),i("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[i("el-form-item",{attrs:{label:"搜索："}},[i("el-input",{attrs:{size:"small",placeholder:"输入角色名称"},model:{value:e.formInline.role_name,callback:function(t){e.$set(e.formInline,"role_name",t)},expression:"formInline.role_name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:""}},[i("el-input",{attrs:{size:"small",placeholder:"输入角色代码"},model:{value:e.formInline.role_id,callback:function(t){e.$set(e.formInline,"role_id",t)},expression:"formInline.role_id"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEdit()}}},[e._v("添加")])],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.visibleRoleInfoList,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[i("el-table-column",{attrs:{align:"center",type:"selection",width:"60"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"role_name",label:"角色名称",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"role_id",label:"角色代码",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"create_time",label:"创建时间",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"create_name",label:"创建角色",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteUser(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(i){return e.menuAccess(t.$index,t.row)}}},[e._v("菜单权限")])]}}])})],1),e._v(" "),i("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.currentRoleInfoList.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),i("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"30%"},on:{"update:visible":function(t){e.editFormVisible=t},click:function(t){return e.closeDialog("edit")}}},[i("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[i("el-form-item",{attrs:{label:"系统编码",prop:"systemNo"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入系统编码"},model:{value:e.editForm.systemNo,callback:function(t){e.$set(e.editForm,"systemNo",t)},expression:"editForm.systemNo"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入角色名称"},model:{value:e.editForm.roleName,callback:function(t){e.$set(e.editForm,"roleName",t)},expression:"editForm.roleName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"角色代码",prop:"roleNo"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入角色代码"},model:{value:e.editForm.roleNo,callback:function(t){e.$set(e.editForm,"roleNo",t)},expression:"editForm.roleNo"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){return e.closeDialog("edit")}}},[e._v("取消")]),e._v(" "),i("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("保存")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"菜单权限",visible:e.menuAccessshow,width:"30%"},on:{"update:visible":function(t){e.menuAccessshow=t},click:function(t){return e.closeDialog("perm")}}},[i("el-tree",{ref:"tree",attrs:{"default-expand-all":"",data:e.RoleRight,props:e.RoleRightProps,"default-checked-keys":e.checkmenu,"node-key":"id","show-checkbox":""}}),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){return e.closeDialog("perm")}}},[e._v("取消")]),e._v(" "),i("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:e.menuPermSave}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var ge=i("VU/8")(he,fe,!1,function(e){i("dOj2")},"data-v-07b0da20",null).exports,ve={data:function(){return{nshow:!0,fshow:!1,loading:!1,editFormVisible:!1,title:"添加",editForm:{deptId:"",deptName:"",deptNo:"",token:localStorage.getItem("logintoken")},rules:{deptName:[{required:!0,message:"请输入部门名称",trigger:"blur"}],deptNo:[{required:!0,message:"请输入部门代码",trigger:"blur"}]},formInline:{page:1,limit:10,varLable:"",varName:"",token:localStorage.getItem("logintoken")},seletedata:{ids:"",token:localStorage.getItem("logintoken")},userparm:[],listData:[],pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:M},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){this.loading=!0;var t=5,i=[{addUser:null,editUser:null,addTime:1521062371e3,editTime:15267002e5,deptId:2,deptName:"上海分公司",deptNo:"1",parentId:1},{addUser:null,editUser:null,addTime:1521063247e3,editTime:1526652291e3,deptId:3,deptName:"上海测试",deptNo:"02",parentId:1},{addUser:null,editUser:null,addTime:1526349555e3,editTime:1526349565e3,deptId:12,deptName:"1",deptNo:"11",parentId:1},{addUser:null,editUser:null,addTime:1526373178e3,editTime:1526373178e3,deptId:13,deptName:"5",deptNo:"5",parentId:1},{addUser:null,editUser:null,addTime:1526453107e3,editTime:1526453107e3,deptId:17,deptName:"v",deptNo:"v",parentId:1}];this.loading=!1,this.listData=i,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,this.pageparm.total=t},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.formInline)},handleEdit:function(e,t){this.editFormVisible=!0,void 0!=t&&"undefined"!=t?(this.title="修改",this.editForm.deptId=t.deptId,this.editForm.deptName=t.deptName,this.editForm.deptNo=t.deptNo):(this.title="添加",this.editForm.deptId="",this.editForm.deptName="",this.editForm.deptNo="")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;T(t.editForm).then(function(e){t.editFormVisible=!1,t.loading=!1,e.success?(t.getdata(t.formInline),t.$message({type:"success",message:"公司保存成功！"})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("公司保存失败，请稍后再试！")})})},deleteUser:function(e,t){var i=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){z(t.deptId).then(function(e){e.success?(i.$message({type:"success",message:"公司已删除!"}),i.getdata(i.formInline)):i.$message({type:"info",message:e.msg})}).catch(function(e){i.loading=!1,i.$message.error("公司删除失败，请稍后再试！")})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},closeDialog:function(){this.editFormVisible=!1}}},be={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),i("el-breadcrumb-item",[e._v("公司管理")])],1),e._v(" "),i("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[i("el-form-item",{attrs:{label:"搜索："}},[i("el-input",{attrs:{size:"small",placeholder:"输入部门名称"},model:{value:e.formInline.deptName,callback:function(t){e.$set(e.formInline,"deptName",t)},expression:"formInline.deptName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:""}},[i("el-input",{attrs:{size:"small",placeholder:"输入部门代码"},model:{value:e.formInline.deptNo,callback:function(t){e.$set(e.formInline,"deptNo",t)},expression:"formInline.deptNo"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEdit()}}},[e._v("添加")])],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[i("el-table-column",{attrs:{align:"center",type:"selection",width:"60"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"deptName",label:"部门名称",width:"300"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"deptNo",label:"部门代码",width:"300"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"editTime",label:"修改时间",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[e._v(e._s(e._f("timestampToTime")(t.row.editTime)))])]}}])}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"editUser",label:"修改人",width:"300"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteUser(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}}),e._v(" "),i("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"30%"},on:{"update:visible":function(t){e.editFormVisible=t},click:e.closeDialog}},[i("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[i("el-form-item",{attrs:{label:"部门名称",prop:"deptName"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入部门名称"},model:{value:e.editForm.deptName,callback:function(t){e.$set(e.editForm,"deptName",t)},expression:"editForm.deptName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"部门代码",prop:"deptNo"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入部门代码"},model:{value:e.editForm.deptNo,callback:function(t){e.$set(e.editForm,"deptNo",t)},expression:"editForm.deptNo"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var ye=i("VU/8")(ve,be,!1,function(e){i("/w8P")},"data-v-2559cf9a",null).exports,Ie={data:function(){return{nshow:!0,fshow:!1,loading:!1,editFormVisible:!1,title:"添加",editForm:{varId:"",varLable:"",varName:"",varValue:"",token:localStorage.getItem("logintoken")},rules:{varLable:[{required:!0,message:"请输入变量描述",trigger:"blur"}],varName:[{required:!0,message:"请输入变量名称",trigger:"blur"}],varValue:[{required:!0,message:"请输入变量名称",trigger:"blur"}]},formInline:{page:1,limit:10,varLable:"",varName:"",token:localStorage.getItem("logintoken")},seletedata:{ids:"",token:localStorage.getItem("logintoken")},userparm:[],listData:[],pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:M},watch:{},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){this.loading=!0;var t=6,i=[{addUser:"root",editUser:"root",addTime:1519385529e3,editTime:1520619747e3,varId:190,deptId:1,varLable:"支付访问域名",varName:"domainName",varValue:"http://127.0.0.1:8080/iot-service-pay"},{addUser:"root",editUser:"root",addTime:1519451541e3,editTime:1519451547e3,varId:191,deptId:1,varLable:"商品图片地址",varName:"productImgURL",varValue:"http://ymwlw.com/pic"},{addUser:"root",editUser:"root",addTime:1519452658e3,editTime:1519452661e3,varId:192,deptId:1,varLable:"手机支付广告地址",varName:"groupDomain",varValue:"http://ymwlwl.com"},{addUser:null,editUser:null,addTime:1519879624e3,editTime:1519879628e3,varId:193,deptId:1,varLable:"下单接口测试模式",varName:"envType",varValue:"false"},{addUser:null,editUser:null,addTime:1526374014e3,editTime:1526374031e3,varId:198,deptId:null,varLable:"sgh",varName:"jhjj",varValue:"jhjhgs"},{addUser:null,editUser:null,addTime:1526453243e3,editTime:1526453243e3,varId:199,deptId:null,varLable:"v",varName:"v",varValue:"v"}];this.loading=!1,this.listData=i,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,this.pageparm.total=t},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.formInline)},handleEdit:function(e,t){this.editFormVisible=!0,void 0!=t&&"undefined"!=t?(this.title="修改",this.editForm.varId=t.varId,this.editForm.varLable=t.varLable,this.editForm.varName=t.varName,this.editForm.varValue=t.varValue):(this.title="添加",this.editForm.varId="",this.editForm.varLable="",this.editForm.varName="",this.editForm.varValue="")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var i;(i=t.editForm,S("post","/api/Variable/save",i)).then(function(e){t.editFormVisible=!1,t.loading=!1,e.success?(t.getdata(t.formInline),t.$message({type:"success",message:"系统环境变量保存成功！"})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("系统环境变量保存失败，请稍后再试！")})})},deleteUser:function(e,t){var i=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=t.varId,f.a.delete("/api/Variable/delete?ids="+e+"&token="+localStorage.getItem("logintoken")).then(function(e){return e.data})).then(function(e){e.success?(i.$message({type:"success",message:"系统环境变量已删除"}),i.getdata(i.formInline)):i.$message({type:"info",message:e.msg})}).catch(function(e){i.loading=!1,i.$message.error("系统环境变量删除失败，请稍后再试！")})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},closeDialog:function(){this.editFormVisible=!1}}},_e={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),i("el-breadcrumb-item",[e._v("系统环境变量")])],1),e._v(" "),i("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[i("el-form-item",{attrs:{label:"搜索："}},[i("el-input",{attrs:{size:"small",placeholder:"输入变量描述"},model:{value:e.formInline.varLable,callback:function(t){e.$set(e.formInline,"varLable",t)},expression:"formInline.varLable"}})],1),e._v(" "),i("el-form-item",{attrs:{label:""}},[i("el-input",{attrs:{size:"small",placeholder:"输入变量名称"},model:{value:e.formInline.varName,callback:function(t){e.$set(e.formInline,"varName",t)},expression:"formInline.varName"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEdit()}}},[e._v("添加")])],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[i("el-table-column",{attrs:{align:"center",type:"selection",width:"60"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"varLable",label:"变量描述",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"varName",label:"变量名称",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"varValue",label:"变量名称",width:"300"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"editTime",label:"修改时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[e._v(e._s(e._f("timestampToTime")(t.row.editTime)))])]}}])}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"editUser",label:"修改人",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteUser(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}}),e._v(" "),i("el-dialog",{attrs:{title:"修改",visible:e.editFormVisible,width:"30%"},on:{"update:visible":function(t){e.editFormVisible=t},click:e.closeDialog}},[i("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[i("el-form-item",{attrs:{label:"变量描述",prop:"varLable"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"变量描述"},model:{value:e.editForm.varLable,callback:function(t){e.$set(e.editForm,"varLable",t)},expression:"editForm.varLable"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"变量名称",prop:"varName"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"变量名称"},model:{value:e.editForm.varName,callback:function(t){e.$set(e.editForm,"varName",t)},expression:"editForm.varName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"变量名称",prop:"varValue"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"变量名称"},model:{value:e.editForm.varValue,callback:function(t){e.$set(e.editForm,"varValue",t)},expression:"editForm.varValue"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var we=i("VU/8")(Ie,_e,!1,function(e){i("RH5b")},"data-v-2307a9ba",null).exports,ke={data:function(){return{nshow:!0,fshow:!1,loading:!1,editFormVisible:!1,title:"添加",editForm:{permissionId:"",permissionName:"",permission:"",token:localStorage.getItem("logintoken")},rules:{permissionName:[{required:!0,message:"请输入权限名称",trigger:"blur"}],permission:[{required:!0,message:"请输入权限CODE",trigger:"blur"}]},formInline:{page:1,limit:10,permissionName:"",permission:"",roleId:"0",token:localStorage.getItem("logintoken")},selectdata:[],userparm:[],listData:[],pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:M},watch:{},created:function(){this.getdata(this.formInline),this.getAccsee()},methods:{getdata:function(e){this.loading=!0;var t=0,i=[{addUser:null,editUser:null,addTime:1519728609e3,editTime:15225857e5,permissionId:1,permissionName:"用户-列表",permission:"system:User:list",lay_CHECKED:!1,LAY_CHECKED:!1},{addUser:null,editUser:null,addTime:1519728667e3,editTime:1522585706e3,permissionId:3,permissionName:"用户-修改",permission:"system:User:save",lay_CHECKED:!1,LAY_CHECKED:!1},{addUser:null,editUser:null,addTime:1519728669e3,editTime:1522256096e3,permissionId:4,permissionName:"用户-删除",permission:"system:User:delete",lay_CHECKED:!1,LAY_CHECKED:!1},{addUser:"root",editUser:"root",addTime:1520249365e3,editTime:1522256085e3,permissionId:5,permissionName:"系统管理:角色:列表",permission:"system:Role:list",lay_CHECKED:!1,LAY_CHECKED:!1},{addUser:"root",editUser:"root",addTime:1520249588e3,editTime:1520249588e3,permissionId:7,permissionName:"system:Role:save",permission:"system:Role:save",lay_CHECKED:!1,LAY_CHECKED:!1},{addUser:"root",editUser:"root",addTime:1520249588e3,editTime:1520249588e3,permissionId:8,permissionName:"system:Role:delete",permission:"system:Role:delete",lay_CHECKED:!1,LAY_CHECKED:!1},{addUser:"root",editUser:"root",addTime:1520251014e3,editTime:1520251014e3,permissionId:9,permissionName:"system:Variable:列表",permission:"system:Variable:list",lay_CHECKED:!1,LAY_CHECKED:!1},{addUser:"root",editUser:"root",addTime:1520251014e3,editTime:1520251014e3,permissionId:11,permissionName:"system:Variable:修改",permission:"system:Variable:save",lay_CHECKED:!1,LAY_CHECKED:!1},{addUser:"root",editUser:"root",addTime:1520251014e3,editTime:1520251014e3,permissionId:12,permissionName:"system:Variable:删除",permission:"system:Variable:delete",lay_CHECKED:!1,LAY_CHECKED:!1}];this.loading=!1,this.listData=i,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,this.pageparm.total=t},getAccsee:function(){var e=this;f.a.get("/api/Role/dropDown/all?&token="+localStorage.getItem("logintoken")).then(function(e){return e.data}).then(function(t){0==t.success?e.$message({type:"info",message:t.msg}):e.userparm=t.data}).catch(function(t){e.$message.error("权限获取失败，请稍后再试！")})},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.formInline)},handleEdit:function(e,t){this.editFormVisible=!0,void 0!=t&&"undefined"!=t?(this.title="修改",this.editForm.permissionId=t.permissionId,this.editForm.permissionName=t.permissionName,this.editForm.permission=t.permission):(this.title="添加",this.editForm.permissionId="",this.editForm.permissionName="",this.editForm.permission="")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var i;(i=t.editForm,S("post","/api/Permission/save",i)).then(function(e){t.editFormVisible=!1,t.loading=!1,e.success?(t.getdata(t.formInline),t.$message({type:"success",message:"权限管理保存成功！"})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("权限管理保存失败，请稍后再试！")})})},deleteUser:function(e,t){var i=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=t.permissionId,f.a.delete("/api/Permission/delete?ids="+e+"&token="+localStorage.getItem("logintoken")).then(function(e){return e.data})).then(function(e){e.success?(i.$message({type:"success",message:"权限管理已删除！"}),i.getdata(i.formInline)):i.$message({type:"info",message:e.msg})}).catch(function(e){i.loading=!1,i.$message.error("权限管理删除失败,请稍后再试！")})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},selectChange:function(e){this.selectdata=e},RolePermission:function(){var e=this,t={roleId:"",permissionIds:""};if("0"==this.formInline.roleId)return this.$message({type:"info",message:"请选择角色"}),!1;t.roleId=this.formInline.roleId;var i,a=this.selectdata,n=[];if(0!=a)for(var r=0;r<a.length;r++)n.push(a[r].permissionId);t.permissionIds=n.join(","),(i=t,S("post","/api/RolePermission/save",i)).then(function(t){t.success?(e.$message({type:"success",message:"配置权限成功！"}),e.getdata(e.formInline)):e.$message({type:"info",message:t.msg})}).catch(function(t){e.loading=!1,e.$message.error("配置权限失败,请稍后再试！")})},closeDialog:function(){this.editFormVisible=!1}}},Ne={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),i("el-breadcrumb-item",[e._v("权限管理")])],1),e._v(" "),i("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[i("el-form-item",{attrs:{label:"搜索："}},[i("el-input",{attrs:{size:"small",placeholder:"输入权限名称"},model:{value:e.formInline.permissionName,callback:function(t){e.$set(e.formInline,"permissionName",t)},expression:"formInline.permissionName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:""}},[i("el-input",{attrs:{size:"small",placeholder:"输入权限CODE"},model:{value:e.formInline.permission,callback:function(t){e.$set(e.formInline,"permission",t)},expression:"formInline.permission"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"角色："}},[i("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.formInline.roleId,callback:function(t){e.$set(e.formInline,"roleId",t)},expression:"formInline.roleId"}},[i("el-option",{attrs:{selected:"",label:"请选择",value:"0"}}),e._v(" "),e._l(e.userparm,function(e){return i("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})})],2)],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEdit()}}},[e._v("添加")]),e._v(" "),i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.RolePermission()}}},[e._v("配置权限")])],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"},on:{"selection-change":e.selectChange}},[i("el-table-column",{attrs:{align:"center",type:"selection",width:"60"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"permissionName",label:"权限名称",width:"300"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"permission",label:"权限CODE",width:"300"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"editTime",label:"修改时间",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[e._v(e._s(e._f("timestampToTime")(t.row.editTime)))])]}}])}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"editUser",label:"修改人",width:"300"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteUser(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}}),e._v(" "),i("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"30%"},on:{"update:visible":function(t){e.editFormVisible=t},click:e.closeDialog}},[i("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[i("el-form-item",{attrs:{label:"权限名称",prop:"permissionName"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"权限名称"},model:{value:e.editForm.permissionName,callback:function(t){e.$set(e.editForm,"permissionName",t)},expression:"editForm.permissionName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"权限CODE",prop:"permission"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"权限CODE"},model:{value:e.editForm.permission,callback:function(t){e.$set(e.editForm,"permission",t)},expression:"editForm.permission"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var Fe=i("VU/8")(ke,Ne,!1,function(e){i("uf0m")},"data-v-01e9fc18",null).exports,Ae={data:function(){return{nshow:!0,fshow:!1,loading:!1,editFormVisible:!1,title:"添加",payType:[{key:"现金",value:1},{key:"支付宝",value:2},{key:"微信",value:3},{key:"POS通",value:4},{key:"闪付",value:5},{key:"POS通C扫B",value:6},{key:"银联二维码",value:8},{key:"会员余额支付",value:9}],editForm:{tcId:"",machineNo:"",payType:"",configId:"",configName:"",payOpen:"",token:localStorage.getItem("logintoken")},rules:{machineNo:[{required:!0,message:"请输入终端号",trigger:"blur"}],payType:[{required:!0,message:"请选择支付方式",trigger:"blur"}],configId:[{required:!0,message:"请输入配置序号",trigger:"blur"}],configName:[{required:!0,message:"请输入显示名称",trigger:"blur"}],payOpen:[{required:!0,message:"请选择状态",trigger:"blur"}]},formInline:{page:1,limit:10,varLable:"",varName:"",token:localStorage.getItem("logintoken")},seletedata:{ids:"",token:localStorage.getItem("logintoken")},userparm:[],listData:[],pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:M},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){this.loading=!0;var t=5,i=[{addUser:null,editUser:null,addTime:null,editTime:1524046759e3,tcId:1,deptId:1,machineNo:"564565656666",payType:3,payOpen:"T",configId:63,configName:"微信",posNo:"098"},{addUser:null,editUser:null,addTime:null,editTime:null,tcId:2,deptId:1,machineNo:"66666666",payType:2,payOpen:"T",configId:64,configName:"支付宝",posNo:null},{addUser:null,editUser:null,addTime:null,editTime:null,tcId:3,deptId:1,machineNo:"93066545645546500791",payType:6,payOpen:"T",configId:67,configName:"银商微信、支付宝",posNo:null},{addUser:null,editUser:null,addTime:null,editTime:null,tcId:4,deptId:1,machineNo:"65545656565",payType:6,payOpen:"T",configId:67,configName:"银商微信、支付宝",posNo:null},{addUser:null,editUser:null,addTime:1527409037e3,editTime:1527409037e3,tcId:6,deptId:1,machineNo:"565654545454545",payType:6,payOpen:"T",configId:96,configName:"微信",posNo:null}];this.loading=!1,this.listData=i,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,this.pageparm.total=t},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.formInline)},handleEdit:function(e,t){this.editFormVisible=!0,void 0!=t&&"undefined"!=t?(this.title="修改",this.editForm.tcId=t.tcId,this.editForm.machineNo=t.machineNo,this.editForm.configId=t.configId,this.editForm.payType=t.payType,this.editForm.configName=t.configName,this.editForm.payOpen=t.payOpen):(this.title="添加",this.editForm.tcId="",this.editForm.machineNo="",this.editForm.payType="",this.editForm.configId="",this.editForm.configName="",this.editForm.payOpen="")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var i;(i=t.editForm,S("post","/api/MachineConfig/save",i)).then(function(e){t.editFormVisible=!1,t.loading=!1,e.success?(t.getdata(t.formInline),t.$message({type:"success",message:"公司保存成功！"})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("支付配置信息保存失败，请稍后再试！")})})},deleteUser:function(e,t){var i=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=t.deptId,f.a.delete("/api/MachineConfig/delete?ids="+e+"&token="+localStorage.getItem("logintoken")).then(function(e){return e.data})).then(function(e){e.success?(i.$message({type:"success",message:"公司已删除!"}),i.getdata(i.formInline)):i.$message({type:"info",message:e.msg})}).catch(function(e){i.loading=!1,i.$message.error("支付配置信息删除失败，请稍后再试！")})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},closeDialog:function(){this.editFormVisible=!1}}},xe={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),i("el-breadcrumb-item",[e._v("支付配置信息")])],1),e._v(" "),i("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[i("el-form-item",{attrs:{label:"搜索："}},[i("el-input",{attrs:{size:"small",placeholder:"输入终端号"},model:{value:e.formInline.machineNo,callback:function(t){e.$set(e.formInline,"machineNo",t)},expression:"formInline.machineNo"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEdit()}}},[e._v("添加")])],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[i("el-table-column",{attrs:{align:"center",type:"selection",width:"60"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"machineNo",label:"终端号",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"payType",label:"支付方式",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"configName",label:"显示名称",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"payOpen",label:"状态",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"editTime",label:"修改时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[e._v(e._s(e._f("timestampToTime")(t.row.editTime)))])]}}])}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"editUser",label:"修改人",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteUser(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}}),e._v(" "),i("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"30%"},on:{"update:visible":function(t){e.editFormVisible=t},click:e.closeDialog}},[i("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[i("el-form-item",{attrs:{label:"终端号",prop:"machineNo"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入终端号"},model:{value:e.editForm.machineNo,callback:function(t){e.$set(e.editForm,"machineNo",t)},expression:"editForm.machineNo"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"支付方式",prop:"payType"}},[i("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择"},model:{value:e.editForm.payType,callback:function(t){e.$set(e.editForm,"payType",t)},expression:"editForm.payType"}},e._l(e.payType,function(e){return i("el-option",{key:e.value,attrs:{label:e.key,value:e.value}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"配置序号",prop:"configId"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入配置序号"},model:{value:e.editForm.configId,callback:function(t){e.$set(e.editForm,"configId",t)},expression:"editForm.configId"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"显示名称",prop:"configName"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入显示名称"},model:{value:e.editForm.configName,callback:function(t){e.$set(e.editForm,"configName",t)},expression:"editForm.configName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"状态",prop:"payOpen"}},[i("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择"},model:{value:e.editForm.payOpen,callback:function(t){e.$set(e.editForm,"payOpen",t)},expression:"editForm.payOpen"}},[i("el-option",{attrs:{label:"正常",value:"T"}}),e._v(" "),i("el-option",{attrs:{label:"禁用",value:"N"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var Se=i("VU/8")(Ae,xe,!1,function(e){i("XEy1")},"data-v-2d01e4cd",null).exports,Te={data:function(){return{loading:!1,editFormVisible:!1,title:"添加",payType:[{key:"请选择",value:0},{key:"现金",value:1},{key:"支付宝",value:2},{key:"微信",value:3},{key:"POS通",value:4},{key:"闪付",value:5},{key:"POS通C扫B",value:6},{key:"银联二维码",value:8},{key:"会员余额支付",value:9}],editForm:{id:"",name:"",payType:1,partner:"",subMchId:"",appid:"",notifyUrl:"",signType:"",partnerKey:"",sellerUserId:"",certPath:"",certPassword:"",rsaKey:"",token:localStorage.getItem("logintoken")},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],payType:[{required:!0,message:"请选择支付方式",trigger:"blur"}],partner:[{required:!0,message:"请输入商户号",trigger:"blur"}],subMchId:[{required:!0,message:"请输入微信子商户号",trigger:"blur"}],appid:[{required:!0,message:"请输入应用ID",trigger:"blur"}],notifyUrl:[{required:!0,message:"请输入通知回调",trigger:"blur"}],signType:[{required:!0,message:"请输入加密类型",trigger:"blur"}],partnerKey:[{required:!0,message:"请输入商户签名密钥",trigger:"blur"}],sellerUserId:[{required:!0,message:"请输入支付宝卖家",trigger:"blur"}],certPath:[{required:!0,message:"请输入微信证书路径",trigger:"blur"}],certPassword:[{required:!0,message:"请输入微信证书密码",trigger:"blur"}],rsaKey:[{required:!0,message:"请输入支付宝私钥",trigger:"blur"}]},formInline:{page:1,limit:10,name:"",payType:0,partner:"",token:localStorage.getItem("logintoken")},seletedata:{ids:"",token:localStorage.getItem("logintoken")},userparm:[],listData:[],pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:M},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){this.loading=!0;var t=207,i=[{addUser:null,editUser:null,addTime:null,editTime:null,id:1,name:"支付宝2.0",payType:1,partner:"2015122801047567",subMchId:"",appid:"2015122801047567",notifyUrl:"r/pay/alipay/notify",signType:"RSA",partnerKey:"==",sellerUserId:"2088121360144859",certPath:"",certPassword:"",rsaKey:"",deptId:null},{addUser:null,editUser:null,addTime:null,editTime:null,id:2,name:"zzzzzz",payType:2,partner:"1250856201",subMchId:null,appid:"wx3ef7713adf0a97b8",notifyUrl:null,signType:"NATIVE",partnerKey:"2e3cdaf5aa051c16563c0b8916184d5d",sellerUserId:null,certPath:"/usr/local/tomcat_provider/webapps/machine-service-provider-0.0.1-SNAPSHOT/conf/apiclient_cert_1250856201.p12",certPassword:"1250856201",rsaKey:null,deptId:null},{addUser:null,editUser:null,addTime:null,editTime:null,id:3,name:" 待删除",payType:2,partner:"1271942301",subMchId:"1273729701",appid:"wx3ef7713adf0a97b8",notifyUrl:"/pay/wx/notify",signType:"NATIVE",partnerKey:"2e3cdaf5aa051c16563c0b8916184d5d",sellerUserId:"",certPath:"/usr/local/tomcat_provider/webapps/machine-service-provider-0.0.1-SNAPSHOT/conf/apiclient_cert_1271942301.p12",certPassword:"1271942301",rsaKey:null,deptId:null},{addUser:null,editUser:null,addTime:null,editTime:null,id:5,name:"微信301",payType:2,partner:"1271942301",subMchId:"1341564201",appid:"wx3ef7713adf0a97b8",notifyUrl:"er/pay/wx/notify",signType:"NATIVE",partnerKey:"2e3cdaf5aa051c16563c0b8916184d5d",sellerUserId:null,certPath:"/usr/local/tomcat_provider/webapps/---0.0.1-SNAPSHOT/conf/apiclient_cert_1271942301.p12",certPassword:"1271942301",rsaKey:null,deptId:null},{addUser:null,editUser:null,addTime:null,editTime:null,id:6,name:"微信301",payType:2,partner:"1271942301",subMchId:"1284797101",appid:"wx3ef7713adf0a97b8",notifyUrl:"http://180.166.211.210:8114/machine-pay-consumer/pay/wx/notify",signType:"NATIVE",partnerKey:"2e3cdaf5aa051c16563c0b8916184d5d",sellerUserId:null,certPath:"/usr/local/tomcat_provider/webapps/--provider-0.0.1-SNAPSHOT/conf/apiclient_cert_1271942301.p12",certPassword:"1271942301",rsaKey:null,deptId:null},{addUser:null,editUser:null,addTime:null,editTime:null,id:7,name:"微信301",payType:2,partner:"1271942301",subMchId:"1277531101",appid:"wx3ef7713adf0a97b8",notifyUrl:"http://180.166.211.210:8114/machine-pay-consumer/pay/wx/notify",signType:"NATIVE",partnerKey:"2e3cdaf5aa051c16563c0b8916184d5d",sellerUserId:null,certPath:"/usr/local/tomcat_provider/webapps/machine-service-provider-0.0.1-SNAPSHOT/conf/apiclient_cert_1271942301.p12",certPassword:"1271942301",rsaKey:null,deptId:null},{addUser:null,editUser:null,addTime:null,editTime:null,id:8,name:"微信301",payType:2,partner:"1271942301",subMchId:"1276485301",appid:"wx3ef7713adf0a97b8",notifyUrl:"http://180.166.211.210:8114/machine-pay-consumer/pay/wx/notify",signType:"NATIVE",partnerKey:"2e3cdaf5aa051c16563c0b8916184d5d",sellerUserId:null,certPath:"/usr/local/tomcat_provider/webapps/machine-service-provider-0.0.1-SNAPSHOT/conf/apiclient_cert_1271942301.p12",certPassword:"1271942301",rsaKey:null,deptId:null},{addUser:null,editUser:null,addTime:null,editTime:null,id:9,name:"微信",payType:2,partner:"1347158201",subMchId:"1351034701",appid:"wx83a7489c10c9c952",notifyUrl:"",signType:"NATIVE",partnerKey:"f174607ba704632b6cad2df8b04650d6",sellerUserId:null,certPath:"/usr/local/tomcat_provider/webapps/machine-service-provider-0.0.1-SNAPSHOT/conf/apiclient_cert_1347158201.p12",certPassword:"1347158201",rsaKey:null,deptId:null},{addUser:null,editUser:null,addTime:null,editTime:null,id:10,name:"-微信301",payType:2,partner:"1271942301",subMchId:"1357984702",appid:"wx3ef7713adf0a97b8",notifyUrl:"http://180.166.211.210:8114/machine-pay-consumer/pay/wx/notify",signType:"NATIVE",partnerKey:"2e3cdaf5aa051c16563c0b8916184d5d",sellerUserId:null,certPath:"/usr/local/tomcat_provider/webapps/machine-service-provider-0.0.1-SNAPSHOT/conf/apiclient_cert_1271942301.p12",certPassword:"1271942301",rsaKey:null,deptId:null},{addUser:null,editUser:null,addTime:null,editTime:null,id:11,name:"-微信301",payType:2,partner:"1271942301",subMchId:"1357972202",appid:"wx3ef7713adf0a97b8",notifyUrl:"http://180.166.211.210:8114/machine-pay-consumer/pay/wx/notify",signType:"NATIVE",partnerKey:"2e3cdaf5aa051c16563c0b8916184d5d",sellerUserId:null,certPath:"/usr/local/tomcat_provider/webapps/machine-service-provider-0.0.1-SNAPSHOT/conf/apiclient_cert_1271942301.p12",certPassword:"1271942301",rsaKey:null,deptId:null}];this.loading=!1,this.listData=i,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,this.pageparm.total=t},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.formInline)},handleEdit:function(e,t){this.editFormVisible=!0,void 0!=t&&"undefined"!=t?(this.title="修改",this.editForm.id=t.id,this.editForm.name=t.name,this.editForm.payType=t.payType,this.editForm.partner=t.partner,this.editForm.subMchId=t.subMchId,this.editForm.appid=t.appid,this.editForm.notifyUrl=t.notifyUrl,this.editForm.signType=t.signType,this.editForm.partnerKey=t.partnerKey,this.editForm.sellerUserId=t.sellerUserId,this.editForm.certPath=t.certPath,this.editForm.certPassword=t.certPassword,this.editForm.rsaKey=t.rsaKey):(this.title="添加",this.editForm.id="",this.editForm.name="",this.editForm.payType="",this.editForm.partner="",this.editForm.subMchId="",this.editForm.appid="",this.editForm.notifyUrl="",this.editForm.signType="",this.editForm.partnerKey="",this.editForm.sellerUserId="",this.editForm.certPath="",this.editForm.certPassword="",this.editForm.rsaKey="")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var i;(i=t.editForm,S("post","/api/Config/save",i)).then(function(e){t.editFormVisible=!1,t.loading=!1,e.success?(t.getdata(t.formInline),t.$message({type:"success",message:"公司保存成功！"})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("支付配置信息保存失败，请稍后再试！")})})},deleteUser:function(e,t){var i=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=t.deptId,f.a.delete("/api/Config/delete?ids="+e+"&token="+localStorage.getItem("logintoken")).then(function(e){return e.data})).then(function(e){e.success?(i.$message({type:"success",message:"公司已删除!"}),i.getdata(i.formInline)):i.$message({type:"info",message:e.msg})}).catch(function(e){i.loading=!1,i.$message.error("支付配置信息删除失败，请稍后再试！")})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},closeDialog:function(e){this.editFormVisible=!1,this.$refs[e].resetFields()}}},ze={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),i("el-breadcrumb-item",[e._v("支付配置")])],1),e._v(" "),i("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[i("el-form-item",{attrs:{label:"搜索："}},[i("el-input",{attrs:{size:"small",placeholder:"输入名称"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),e._v(" "),i("el-form-item",[i("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.formInline.payType,callback:function(t){e.$set(e.formInline,"payType",t)},expression:"formInline.payType"}},e._l(e.payType,function(e){return i("el-option",{key:e.value,attrs:{label:e.key,value:e.value}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:""}},[i("el-input",{attrs:{size:"small",placeholder:"输入商户号"},model:{value:e.formInline.partner,callback:function(t){e.$set(e.formInline,"partner",t)},expression:"formInline.partner"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEdit()}}},[e._v("添加")])],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[i("el-table-column",{attrs:{align:"center",type:"index",width:"60"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"name",label:"名称",width:"200","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"payType",label:"支付类型",width:"120","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"partner",label:"商户号",width:"100","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"subMchId",label:"微信子商户",width:"140","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"appid",label:"应用ID",width:"100","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"signType",label:"加密类型",width:"120","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"partnerKey",label:"商户签名密钥",width:"180","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"notifyUrl",label:"通知回调",width:"140","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"sellerUserId",label:"支付宝卖家",width:"150","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"certPath",label:"微信证书路径",width:"150","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteUser(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}}),e._v(" "),i("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"30%"},on:{"update:visible":function(t){e.editFormVisible=t},click:function(t){return e.closeDialog("editForm")}}},[i("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[i("el-form-item",{attrs:{label:"名称",prop:"name"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入名称"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"支付类型",prop:"payType"}},[i("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择"},model:{value:e.editForm.payType,callback:function(t){e.$set(e.editForm,"payType",t)},expression:"editForm.payType"}},e._l(e.payType,function(e){return i("el-option",{key:e.value,attrs:{label:e.key,value:e.value}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"商户号",prop:"partner"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入商户号"},model:{value:e.editForm.partner,callback:function(t){e.$set(e.editForm,"partner",t)},expression:"editForm.partner"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"微信子商户",prop:"subMchId"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入微信子商户"},model:{value:e.editForm.subMchId,callback:function(t){e.$set(e.editForm,"subMchId",t)},expression:"editForm.subMchId"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"应用ID",prop:"appid"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入应用ID"},model:{value:e.editForm.appid,callback:function(t){e.$set(e.editForm,"appid",t)},expression:"editForm.appid"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"通知回调",prop:"notifyUrl"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入通知回调"},model:{value:e.editForm.notifyUrl,callback:function(t){e.$set(e.editForm,"notifyUrl",t)},expression:"editForm.notifyUrl"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"加密类型",prop:"signType"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入加密类型"},model:{value:e.editForm.signType,callback:function(t){e.$set(e.editForm,"signType",t)},expression:"editForm.signType"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"商户签名密钥",prop:"partnerKey"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入商户签名密钥"},model:{value:e.editForm.partnerKey,callback:function(t){e.$set(e.editForm,"partnerKey",t)},expression:"editForm.partnerKey"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"支付宝卖家",prop:"sellerUserId"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入支付宝卖家"},model:{value:e.editForm.sellerUserId,callback:function(t){e.$set(e.editForm,"sellerUserId",t)},expression:"editForm.sellerUserId"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"微信证书路径",prop:"certPath"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入微信证书路径"},model:{value:e.editForm.certPath,callback:function(t){e.$set(e.editForm,"certPath",t)},expression:"editForm.certPath"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"微信证书密码",prop:"certPassword"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入微信证书密码"},model:{value:e.editForm.certPassword,callback:function(t){e.$set(e.editForm,"certPassword",t)},expression:"editForm.certPassword"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"支付宝私钥",prop:"rsaKey"}},[i("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入支付宝私钥"},model:{value:e.editForm.rsaKey,callback:function(t){e.$set(e.editForm,"rsaKey",t)},expression:"editForm.rsaKey"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){return e.closeDialog("editForm")}}},[e._v("取消")]),e._v(" "),i("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var Ce=i("VU/8")(Te,ze,!1,function(e){i("0PIF")},"data-v-60573cde",null).exports,Ue={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("数据监控 监控查询")])},staticRenderFns:[]};var $e=i("VU/8")({},Ue,!1,function(e){i("XH8V")},null,null).exports,Le=i("XLwt"),Pe=i.n(Le),Ee={name:"welcome",data:function(){return{machineNo:"",type:"day",SCEoption:{tooltip:{trigger:"item",formatter:"{a} <br/>{b}月 : {c}"},legend:{data:[{name:"销售总笔数",icon:"rect"}],top:1,left:1,itemGap:10,itemWidth:12,itemHeight:12,textStyle:{fontSize:12,color:"#323232"}},grid:{left:50,right:10,top:30,bottom:30,borderWidth:1},xAxis:{type:"category",data:["1","2","3","4","5","6","7","8","9","10","11","12"],axisLine:{lineStyle:{color:"#alarmVisible999",width:1}},axisLabel:{margin:14,height:70,interval:0,textStyle:{fontSize:10,color:"#999999"}}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#999999",width:1}},axisLabel:{margin:14,textStyle:{fontSize:10,color:"#999999"}}},series:[{name:"销售总笔数",type:"bar",barGap:0,data:[5e4,7e4,8e4,4e4,5e4,3e4,4e4,6e4,5e4,4e4,6e4,4e4],barWidth:10,itemStyle:{normal:{color:new Pe.a.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#83bff6"},{offset:.5,color:"#188df0"},{offset:1,color:"#188df0"}])},emphasis:{color:new Pe.a.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#2378f7"},{offset:.7,color:"#2378f7"},{offset:1,color:"#83bff6"}])}}}]},SUMoption:{tooltip:{trigger:"item",formatter:"{a} <br/>{b}月 : {c}"},legend:{data:[{name:"销售总金额",icon:"rect"}],top:1,left:1,itemGap:10,itemWidth:12,itemHeight:12,textStyle:{fontSize:12,color:"#323232"}},grid:{left:50,right:10,top:30,bottom:30,borderWidth:1},xAxis:{type:"category",data:["1","2","3","4","5","6","7","8","9","10","11","12"],axisLine:{lineStyle:{color:"#999999",width:1}},axisLabel:{margin:14,height:70,interval:0,textStyle:{fontSize:10,color:"#999999"}}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#999999",width:1}},axisLabel:{margin:14,textStyle:{fontSize:10,color:"#999999"}}},series:[{name:"销售总金额",type:"line",barGap:0,data:[5e4,7e4,8e4,4e4,5e4,3e4,4e4,6e4,5e4,4e4,6e4,4e4],barWidth:10,itemStyle:{color:"#108ff9"}}]},Clickoption:{tooltip:{trigger:"item",formatter:"{a} <br/>{b}月 : {c}"},legend:{data:[{name:"总点击量",icon:"rect"}],top:1,left:1,itemGap:10,itemWidth:12,itemHeight:12,textStyle:{fontSize:12,color:"#323232"}},grid:{left:50,right:10,top:30,bottom:30,borderWidth:1},xAxis:{type:"category",data:["1","2","3","4","5","6","7","8","9","10","11","12"],axisLine:{lineStyle:{color:"#999999",width:1}},axisLabel:{margin:14,height:70,interval:0,textStyle:{fontSize:10,color:"#999999"}}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#999999",width:1}},axisLabel:{margin:14,textStyle:{fontSize:10,color:"#999999"}}},series:[{name:"总点击量",type:"bar",barGap:0,data:[5e4,1e4,8e4,3e4,5e4,6e4,4e4,8e4,5e4,2e4,6e4,4e4],barWidth:10,itemStyle:{color:"#48cefd"}}]},payoption:{backgroundColor:"#2c343c",title:{text:"支付方式统计(金额)",left:10,top:5,textStyle:{fontSize:12,color:"#ccc"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},visualMap:{show:!1,min:80,max:600,inRange:{colorLightness:[0,1]}},series:[{name:"支付方式统计(金额)",type:"pie",radius:"55%",center:["50%","50%"],data:[{value:335,name:"支付宝"},{value:310,name:"银商二维码"},{value:274,name:"会员"},{value:235,name:"微信支付"},{value:100,name:"Pos通"}].sort(function(e,t){return e.value-t.value}),roseType:"radius",label:{normal:{textStyle:{color:"rgba(255, 255, 255, 0.3)"}}},labelLine:{normal:{lineStyle:{color:"rgba(255, 255, 255, 0.3)"},smooth:.2,length:10,length2:20}},itemStyle:{normal:{color:"#c23531",shadowBlur:200,shadowColor:"rgba(0, 0, 0, 0.5)"}},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(e){return 200*Math.random()}}]},payNumoption:{backgroundColor:"#2c343c",title:{text:"支付方式统计(笔数)",left:10,top:5,textStyle:{fontSize:12,color:"#ccc"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},visualMap:{show:!1,min:80,max:600,inRange:{colorLightness:[0,1]}},series:[{name:"支付方式统计(笔数)",type:"pie",radius:"55%",center:["50%","50%"],data:[{value:335,name:"支付宝"},{value:310,name:"银商二维码"},{value:274,name:"会员"},{value:235,name:"微信支付"},{value:100,name:"Pos通"}].sort(function(e,t){return e.value-t.value}),roseType:"radius",label:{normal:{textStyle:{color:"rgba(255, 255, 255, 0.3)"}}},labelLine:{normal:{lineStyle:{color:"rgba(255, 255, 255, 0.3)"},smooth:.2,length:10,length2:20}},itemStyle:{normal:{color:"#c23531",shadowBlur:200,shadowColor:"rgba(0, 0, 0, 0.5)"}},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(e){return 200*Math.random()}}]}}},components:{},created:function(){},mounted:function(){this.getSCE(),this.getSUM(),this.getClick(),this.getpay(),this.getpayNum()},methods:{getSCE:function(){this.chart=Pe.a.init(this.$refs.SCEchart),this.chart.setOption(this.SCEoption)},getSUM:function(){this.chart=Pe.a.init(this.$refs.SUMEchart),this.chart.setOption(this.SUMoption)},getClick:function(){this.chart=Pe.a.init(this.$refs.ClickEchart),this.chart.setOption(this.Clickoption)},getpay:function(){this.chart=Pe.a.init(this.$refs.payEchart),this.chart.setOption(this.payoption)},getpayNum:function(){this.chart=Pe.a.init(this.$refs.payNumEchart),this.chart.setOption(this.payNumoption)}}},Ve={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"stbox"},[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),i("el-breadcrumb-item",[e._v("数据可视化")])],1),e._v(" "),i("el-row",{attrs:{gutter:23}},[i("el-col",{attrs:{span:18}},[i("div",{staticClass:"stbgc"},[i("el-row",{attrs:{gutter:23}},[i("el-col",{attrs:{span:7}},[i("el-input",{attrs:{size:"small",placeholder:"请输入所属公司"},model:{value:e.machineNo,callback:function(t){e.machineNo=t},expression:"machineNo"}})],1),e._v(" "),i("el-col",{attrs:{span:7}},[i("el-input",{attrs:{size:"small",placeholder:"请输入资产编号"},model:{value:e.machineNo,callback:function(t){e.machineNo=t},expression:"machineNo"}})],1),e._v(" "),i("el-col",{attrs:{span:7}},[i("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:e.machineNo,callback:function(t){e.machineNo=t},expression:"machineNo"}})],1),e._v(" "),i("el-col",{staticClass:"stsearch",attrs:{span:3}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("搜索")])],1)],1)],1)]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",{staticClass:"stbgc"},[i("el-row",[i("el-col",{staticClass:"text-c",attrs:{span:8}},[i("el-radio",{attrs:{label:"day"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("日")])],1),e._v(" "),i("el-col",{staticClass:"text-c",attrs:{span:8}},[i("el-radio",{attrs:{label:"month"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("月")])],1),e._v(" "),i("el-col",{staticClass:"text-c",attrs:{span:8}},[i("el-radio",{attrs:{label:"years"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("年")])],1)],1)],1)])],1),e._v(" "),i("el-row",{attrs:{gutter:23}},[i("el-col",{staticClass:"text-c",attrs:{span:8}},[i("div",{staticClass:"st-gbox"},[i("div",{ref:"SCEchart",staticClass:"cavasbox"})])]),e._v(" "),i("el-col",{staticClass:"text-c",attrs:{span:8}},[i("div",{staticClass:"st-gbox"},[i("div",{ref:"SUMEchart",staticClass:"cavasbox"})])]),e._v(" "),i("el-col",{staticClass:"text-c",attrs:{span:8}},[i("div",{staticClass:"st-gbox"},[i("div",{ref:"ClickEchart",staticClass:"cavasbox"})])])],1),e._v(" "),i("div",[i("el-row",{attrs:{gutter:23}},[i("el-col",{staticClass:"text-c",attrs:{span:12}},[i("div",{staticClass:"paybox"},[i("div",{ref:"payEchart",staticClass:"cavasbox"})])]),e._v(" "),i("el-col",{staticClass:"text-c",attrs:{span:12}},[i("div",{staticClass:"paybox"},[i("div",{ref:"payNumEchart",staticClass:"cavasbox"})])])],1)],1)],1)},staticRenderFns:[]};var Me=i("VU/8")(Ee,Ve,!1,function(e){i("F46H")},null,null).exports;o.default.use(m.a);var De=new m.a({routes:[{path:"/",name:"",component:x,hidden:!0,meta:{requireAuth:!1}},{path:"/login",name:"登录",component:x,hidden:!0,meta:{requireAuth:!1}},{path:"/index",name:"首页",component:E,iconCls:"el-icon-tickets",children:[{path:"/goods/Goods",name:"商品管理",component:B,meta:{requireAuth:!0}},{path:"/machine/Machine",name:"机器信息管理",component:K,meta:{requireAuth:!0}},{path:"/machine/MachineAisle",name:"货道信息管理",component:H,meta:{requireAuth:!0}},{path:"/system/user",name:"用户管理",component:de,meta:{requireAuth:!0}},{path:"/system/Module",name:"菜单管理",component:pe,meta:{requireAuth:!0}},{path:"/system/Role",name:"角色管理",component:ge,meta:{requireAuth:!0}},{path:"/system/Dept",name:"公司管理",component:ye,meta:{requireAuth:!0}},{path:"/system/Variable",name:"系统环境变量",component:we,meta:{requireAuth:!0}},{path:"/system/Permission",name:"权限管理",component:Fe,meta:{requireAuth:!0}},{path:"/machine/MachineConfig",name:"支付配置信息",component:Se,meta:{requireAuth:!0}},{path:"/pay/Config",name:"支付配置",component:Ce,meta:{requireAuth:!0}},{path:"/druid/login",name:"监控查询",component:$e,meta:{requireAuth:!0}},{path:"/charts/statistics",name:"数据可视化",component:Me,meta:{requireAuth:!0}},{path:"/amap/AMap",name:"实时位置",component:Z,meta:{requireAuth:!0}},{path:"/amap/Monitor",name:"视频检测",component:ie,meta:{requireAuth:!0}},{path:"/amap/BehavioralSurveillance",name:"行为检测",component:le,meta:{requireAuth:!0}}]}]});o.default.use(J.a);var Re=new J.a.Store({state:{user:!1},mutations:{login:function(e,t){e.user=t,localStorage.setItem("userInfo",t)},logout:function(e,t){e.user="",localStorage.setItem("userInfo","")}}}),Be=(i("7xIN"),i("ILD9")),qe=i.n(Be);o.default.use(qe.a),o.default.prototype.$echarts=Pe.a,o.default.prototype.$axios=f.a,f.a.defaults.baseURL="http://192.168.29.76:6010",o.default.config.productionTip=!1,o.default.use(s.a),r()(a).forEach(function(e){o.default.filter(e,a[e])}),o.default.use(j.a),j.a.initAMapApiLoader({key:"cecf91ca8164d37af8282ad46ca57230",plugin:["AMap.Scale","AMap.OverView","AMap.ToolBar","AMap.MapType","AMap.PlaceSearch","AMap.Geolocation","AMap.Autocomplete","AMap.Geocoder"],v:"1.4.4",uiVersion:"1.0"}),De.beforeEach(function(e,t,i){0!=e.matched.length?e.meta.requireAuth?Boolean(localStorage.getItem("userInfo"))?i():i({path:"/login",query:{redirect:e.fullPath}}):Boolean(localStorage.getItem("userInfo"))?"/"!=e.path&&"/login"!=e.path?i():i({path:"/goods/Goods"}):i():i({path:"/login",query:{redirect:e.fullPath}})}),new o.default({el:"#app",router:De,store:Re,components:{App:d},template:"<App/>",data:{Bus:new o.default}})},OGNB:function(e,t){},OgzQ:function(e,t){},RH5b:function(e,t){},Utyp:function(e,t){},XEy1:function(e,t){},XH8V:function(e,t){},ZNOL:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAABUlJREFUaEPtmA9MVVUcx7/nvct7PP70pPf05aMCTJlM59QQeUZE8ExwutaCWRQTJs7SLVYN28gmLsw1XDUrHCrhnza1xM0tAQXhTUxM0zZd5Z+a6AJr4p8Y8e+9y2nnPt99F3j/LpcN2N7Z2DjvnvO9v8/ve87vnnsJJnkjkzx+BAHG28GgA0EHFGZAXEJv7r6bplBL1nSO49r2FkS1yZrkYTDJq+rMB0W1UqHRzCeUbtm/dmrpaOa65pC8PZ1UiYDCuW0HCo1xSjTGGwAHCo2KKmEQQIn9bO6EccCaoEHj7wOyeSYEwBwzh7UpOmw61o3ufnk1YUIAbFwWjhlGNZqvDeDwz32yXChfASs4DjzvEDczxxTUHBw8T6JNhgZfgoo3ceosDXKTQsV7bKv7D7fu8wFDfLrSdxGioBXRJuMGb4KyANJmArY/3FIhaqDs5Ujode4gLrc7UGHrGTMAJqQiqneemBb1pSfRgAGidEBxOkHTDYrG606pV+ZrsWyOdoTurpZeXLptDwjCnwMSkWVmk+HkcNGAAVYtIFj4pHP69mYKtUqF0pURHoNsfziIj493jykAATooTyxm8+O3pcIBAcw2AQVJ7mVypQMI1YUiMSbEa5A1l/rQEEBZleEAe31smm4yZMgGKEolMOvd0ziOQ3iYzmeG++w0oLIqB8B5Q7rTbDKud93crwNs42YlDK0UEeFhUKvVfpdIIGVVPgAAQovM04w7WAA+AaLCnBtXLYlfowmBLtRdNv1R+CurowJgN+WRaTYbTvgEkG5cIVACREZEQEUCP0D6K6ujBgDugFdZvAIkmIB8ycZl8YdqtdBqNf6SLqusKgAACGn2CrAmeWiWQzUqPG0YWfNZtP/2Ad39vrl2NHl+uCkCAKjfTSw73TInKAQYnOwAvF+Anlut4HvuCX8aYzzCYiwyc+x7+HAH7HY7fmz9Cb/+dlWYOHdOAp6zLAZ79nho3gH6717Hw4v7hMClTR1mwJRnV0M7NX5MQKQADads2P/tQY+6+Xm5yEh/Yfg1h0cHWPD3Wj7zGuBYQrgAzp47j52VVT6TsuGtQiQvXiQd4xmABc8gXC0uNkb492bbLfE3BmHK3KrYBRdAXsG6IVpGowGdnUPdZwMOVFdKx9mZAzcBxLp+ZUvmn/oPxUFvr1uDJclJQr/13AVUVO4Rrxmef0/xUmIA167fQNm27aJuwux4lHzwvgBw9NgPaDlzVrz2UclGxM965lGfDDAA9lUu3zWCbVq29llj553q3V+DSJ68BYXr2auecF0pQOJTQM58guN1J3Dou6NikJ+XfwLmAGsM4t3iEvFa7qpsZGUuFfqUYoDkVz+I5Xl+s8uFvjuXp9xvrZjvmvHVF+XQ6x8Tul1dXdhQVCyK6edlXw2faf1bzjoy68k8Nj4mij6wxJF2UwR6a+tPRh88XDPXpcOyz1xgjWV/V5Uzoay98XrOlcyXrB2u/ohDTVrma7FqlYMtK6EtSlyIjBdThYNQk+00zl+4KIrxg1ycrf6Q4g+06Styoskg/cslzLKfmrJE6J4+c3bIXuBBpttqvxeT5vFUZl2eXUoB5orXRoAtjbVHFH2YlYpnLM+pBqi4lD3emOKbU3VH1kiveQRwumDfDBAvgrTtVG2Noo+ywwN85MJpADM8Z43+yUOVIs0+G+f1XMwgOJUjn4KuBsijKkXbCMi+scy8NFhLTo4urIduAoV71wrvL3SrozeyzGbbO+KjU0AHewYzFmtdzma3Zr26gI1vrKv5xc9SliM78cYG5MDEC9sdURBgvN0JOhB0QGEG/gd9wed6gkJK3gAAAABJRU5ErkJggg=="},aCzF:function(e,t){},"dLd/":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAGUUlEQVRoQ+2YdYildRSGn2Pr2t0tdreo2CgqdmN3r93dXdiN3YGCYGC3otiKun/YsSrmquuRZzmz3B13nDsz986O4IHLwHzf/e55z+8973nPF/zHI/7j+fM/gP46wcycGVgPuCEifs7MsSNi+IA/gcycAzgCWAlYPSI+y8z5AQG8OWABZOa8wFHA1sCXwIoR8XElvxpwe0R8PeAAZObCwDHAJsBYwLfAyhHxdmbOA6wNDIqI06XvgAGQmUsBxwLrN/TVj8BqEfFyZs4JrANMWPQ5Y0AAqMRPAdbqJAi/We2IeCIzZwQ2M3FgEuDziLhijALIzBWLKp0TN68/gQ0j4sHMnArYGZgASGAc4JWIuH+MAMjMNYGj5XUXEvwXsE1E3JqZVnvfovqkwK/AuMB9EfFivwLITDXc5lzmX2aHye8VEZdnphU/tO6V9z8VfSYDDnYWtB1AZqoiG1fFF21i6O1RyUuTM6viJj4t8BkwKzAsIg7ueFZbVMgpCWwFHAk4dJqJI5TGAn0+8FXx3n6QPsbvwDcRcXZbAGSm/NweOByYq5ms654zIsLvkJnnAu8BU5RkSqVhpUBTVgNf1VIAxdddirOz9CBxb70sIvas5E8FhgBOYRP/AZgY+AWYHJD3T0XEvS0BkJmDgD1sKmD6Hibu7beU4mRmegJyf76ij9y3qccrEH8AUwOnRcS7fQJQiQ8GDgDU6d7EA6X1wzPTflFejWcBp66Vnw74tE5j/JLQHSJCYCOiR02cmUrYPn1M3N99vKbssJLXvYCnge+BdYGhTlsbtkCYp4D+ighPfGQ0BSAzbR6r7VARRF/ipfI3P2XmKsCFwAmVuBR6AZgBWAT4pGhjD+iLtNCCbQ5AZnqE8tsmk+99jbfKWQ7NzKWB26qHjgeuAxQAB937wDvAbNW8DrLhgouIy7oFUNvPYYDKohq0Ij4qT/95Zi4IPATsWAPLBtZd2hfqv1ba+9V9lUgA5nFNRDzfJYCG7Uctt/tbFU7RjoXEBn0CUAQ0aXfU30uBXYEvgCeBhYAlCpAgbOLdIsI+GZVCmTkRcBGwU6sybniODelC8lbZ4qeAK+u6kqnuq/FaDQfUQYBGzWEmWGlkr04TEct1zm9kE2emOr57fWyiVkTjQqLcWnmTs+p6HRXtcuA8YNUCckNR1+n7clVe4Zg1ItzGRol/qFDZgY1KcfTsvY3GhURb/GjJpGr2cG1etwP7F4gDAfvO/znEpJe78Kt1AtFhN7pt4o4baj9VhbaoSjQLpnEhURpNWClW4x8BtAwrNDxM3q9RQPy9+2qp2bRc6AfAM+4I3Z7A6DLMTEe4iqScamn/LRoXEu30jTVlbUjpokQ+U7TZErgeOK4+Umn2Wh8vqd9yY3OoabVHWoiOBJoaZA0nok126Za7q3eBYoSn91pmqiwqmvdu4AAriXy9CqLdPgdwJz6xZo4gVCPV5jFggTq56RotRK8ANCZc720EYoJy3Bjh6St5/x4CbF4mzQG0eJ3Cd4B6LjU9AZVH/m9Xz3muliALYD9sHBGLja5gPTqBLuhl8g6k8SPirErewXRa2Q+VR8po2FS3kwEthEnaEzatk3gHwF3g2vqem5zKeI9LUURIt39EnwF0fmJmarasnDSyqm8AdwNXV9L2ksmoUq8B+xU4Oa+ECs5rApdiDwLvdpxsr5q4WempdVDDN3fRwsVDATApKaM90POoJkuWdbaBHVBedzpLvQuqH+wdh93giNB69MsJ+D7n3lIu5dKPp7J3OUxtwk2ViZx3ODmdtwXurAb2Za6AlE+be6aIUGr7BYAvn1QQK31BRAzJTLVdKfTdpnbYyjqRTdQKdxhGLYX0MdkNAZf7wyOiy22vHT0ggMZweRGMw8lhNlNVXSBK5IeAk/+uklZfGUpDVUuJXWp0FqLPMtpVX7jcdnHNU7EnPJXXMlMg+p/dqslPKqpdXK/VfRfqadjA9sZooz9OoPMPexLutSNtcWY64HSjyzbQyWHnKR3TeYlpfGB/A7D6XVazXqHrWm8utyqdlu+8xIwpADtGhL3QbdR+4kLjfrBMREilMUYht6lV5H23mffihnZTSB47F9y62hLtBKAVMPlRdthWo2gXgOsjQnPW9mgHACWyqWZtBbqWA2hFUj15xv8AelKtdtz7N3tXKk830y/qAAAAAElFTkSuQmCC"},dOj2:function(e,t){},dPK7:function(e,t){},ep8S:function(e,t){},gQKk:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA/0lEQVRYR+2W6w2CQBCEZyqRDrQEO9ASLAE7sAO1A+kAK1A7wA6wA61gzSVH4uPgbgMHJrK/l5kv++KIgYMD+2ME+KqAiKQAFpFacyS5e9V2ASwBzCIBFCTzRoBIxrWy4xCOFWhVARFJAEwUg3sjWfrW0Kxg8rkuLhN7M7YKgIzkygcwB3ACcAawJlkoDNSprkNUAVRiBwtyV6sHfBACYGSM+YbkPkBTlRIK8LAAb3dc5VSTHAKQAUhJ9t6CizXufQiHXUNNX+0hMscoNErvIQpV6iqv1SnuAmIE+L0KiIh5lE676K9D4+p9lNpfrIGIEbn3WR7DtUnz92bg7yrwBOSXVCGtUZf9AAAAAElFTkSuQmCC"},kLiI:function(e,t){},ox3T:function(e,t){},qgky:function(e,t){},rWRm:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA80lEQVRYR+1W2xVBMRCcqYAO6IASqIASdEAHdEALOrg6UAIdUMk4e04+4rivuJL4yH4nO7OzTyKzMTM+CoEPBSTtAKwipeZC8uT7riOwBjCPROBGsmolEAm40W0pwqLAIAUkTQFMAgr3SfLxVRdIWgB4+A7czDgGEDiT3AQRcFEaiM2HJclrAGDn08YUSBoD2AI4eF7SEJBkMlnURsK3pARsZo+yEDBQlwJbTPvkKfCjdkVoatiGTJOCutLN1oZtfeTUsWHU197miH0aNAn7ora9KwSKAk1H6ewXBVbj4955lLoVa5svhlWdZ3kM1NKGf63ACzUdUCHpu3IjAAAAAElFTkSuQmCC"},tvR6:function(e,t){},uf0m:function(e,t){},wmXH:function(e,t){},wmmM:function(e,t){},ymzD:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.2a76a0b92cedb615bfe7.js.map